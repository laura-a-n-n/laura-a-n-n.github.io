{"mappings":"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","sources":["public/src/client/player.js"],"sourcesContent":["// function isCyclic (obj) {\r\n//   var seenObjects = [];\r\n\r\n//   function detect (obj) {\r\n//     if (obj && typeof obj === 'object') {\r\n//       if (seenObjects.indexOf(obj) !== -1) {\r\n//         return true;\r\n//       }\r\n//       seenObjects.push(obj);\r\n//       for (var key in obj) {\r\n//         if (obj.hasOwnProperty(key) && detect(obj[key])) {\r\n//           console.log(obj, 'cycle at ' + key);\r\n//           return true;\r\n//         }\r\n//       }\r\n//     }\r\n//     return false;\r\n//   }\r\n\r\n//   return detect(obj);\r\n// }\r\n\r\nclass Player {\r\n\tconstructor(cam, characterClass) { \r\n\t    // essentials\r\n\t    this.cam = cam;\r\n\t    this.characterProfile = [];\r\n\t    this.characterClass = characterClass;\r\n\t    \r\n\t    // game properties\r\n\t    this.mouseMode = 'split'; // 'split' or 'character'\r\n\t    this.pointingLeft = false;\r\n\r\n\t    // inventory\r\n\t    this.inventory = {};\r\n\r\n\t    // initialize quests\r\n\t    this.initQuests();\r\n\r\n\t    // gui\r\n\t    this.gui = new GUI();\r\n\r\n\t    // number style\r\n\t    this.numberColor = color(255);\r\n\t    this.numOffsetY = 70;\r\n\t    this.numOffsetX = 0;\r\n\r\n\t    // show special number?\r\n\t    this.specialNumber = false;\r\n\t    this.specialLily = 0;\r\n\t    this.sizeSpecial = 40;\r\n\t    this.specialOffX = 30;\r\n\t    this.specialOffY = 70;\r\n\r\n\t    // fade screen\r\n\t    this.isFading = false;\r\n\t    this.fadeFrames = 0;\r\n\t    this.fadeTime = 3;\r\n\t}\r\n\r\n\tget hasQuest() {\r\n\t\treturn this.currentQuest > -1;\r\n\t}\r\n\r\n\tinstantiateCharacter(pushToIndex = 0) {\r\n\t\tthis.character = new this.characterClass(...this.characterProfile);\r\n\t\tthis.character.scale = this.cam.scale;\r\n\t\tfrogs[pushToIndex] = this.character;\r\n\r\n    // number binds\r\n    this.binds = {\r\n    \t'Q': this.character.typeBind(1),\r\n    \t'W': this.character.typeBind(2),\r\n    \t'E': this.character.typeBind(3),\r\n    \t'R': this.character.typeBind(4)\r\n    }\r\n\r\n\t\treturn this.character;\r\n\t}\r\n\r\n\tresetCharacter() {\r\n\t\tthis.instantiateCharacter();\r\n\t\tthis.initQuests();\r\n\r\n\t\tthis.cam.target = this.character;\r\n\t}\r\n\r\n\tassignQuest(quest) {\r\n\t\tthis.questList.push(new quest(player));\r\n  \t\tthis.currentQuest = 0;\r\n\t}\r\n\r\n\tinitQuests() {\r\n\t    this.questList = [];\r\n\t    this.currentQuest = -1; // -1 is no quest\r\n\t    this.questDecayFrames = 0;\r\n\t    this.maxQuestFrames = 100;\r\n\t}\r\n\r\n\t/* frame */\r\n\r\n\tframe() {\r\n\t\tconst charCamCoords = this.cam.toCamCoords(this.character.posX, this.character.posY);\r\n\t\t\r\n\t\tthis.pointingLeft = (mouseX < charCamCoords[0]); // (mouseX < screenSizeX / 2) || ;\r\n\t\tthis.character.environment.envDependentFrame(this);\r\n\r\n\t\tif (this.hasQuest) {\r\n\t\t\tif (this.questList[this.currentQuest].frame()) {\r\n\t\t\t\t// if success, fade out quest window\r\n\t\t\t\tthis.questDecayFrames++;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.questDecayFrames > 0) this.questDecayFrames++;\r\n\r\n\t\t\tif (this.questDecayFrames > this.maxQuestFrames) {\r\n\t\t\t\tthis.questDecayFrames = 0;\r\n\t\t\t\tthis.questList.slice(this.currentQuest, 1);\r\n\t\t\t\tthis.currentQuest = -1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// reset?\r\n\t\tif (this.character.tooHungry && !this.isFading) {\r\n\t\t\tcontrolsEnabled = false;\r\n\t\t\tthis.cam.guiOptions.helpLines = false;\r\n\r\n\t\t\tthis.isFading = true;\r\n\r\n\t\t    // bugs\r\n\t\t    this.bugsN = 4;\r\n\t\t    this.bugsX = Array(this.bugsN).fill(0);\r\n\t\t    this.bugsY = Array(this.bugsN).fill(0);\r\n\t\t    this.bugsTX = Array(this.bugsN).fill(1);\r\n\t\t    this.bugsTY = Array(this.bugsN).fill(-1);\r\n\t\t    this.beeSprite = Array(this.bugsN);\r\n\r\n\t\t    for (let i = 0; i < this.bugsN; i++) {\r\n\t\t      this.bugsX[i] = Math.floor(Math.random() * screenSizeX);\r\n\t\t      this.bugsY[i] = Math.floor(Math.random() * screenSizeY);\r\n\t\t      this.bugsTX[i] = (Math.random() > .5) ? 1 : -1;\r\n\t\t      this.bugsTY[i] = (Math.random() > .5) ? 1 : -1;\r\n\t\t    }\r\n\r\n\t\t} if (this.isFading && this.fadeFrames < this.fadeTime) { \r\n\t\t\tthis.fadeFrames += deltaTime / 1000;\r\n\t\t\tthis.character.posY += 10;\r\n\t\t\tthis.quitReady = true;\r\n\t\t} \r\n\t\tif (this.isFading) {\r\n\t\t    // update bugs\r\n\t\t    for (let i = 0; i < this.bugsN; i++) {\r\n\t\t      this.bugsX[i] += this.bugsTX[i];\r\n\t\t      this.bugsY[i] += this.bugsTY[i];\r\n\r\n\t\t      if (this.bugsX[i] > screenSizeX) this.bugsTX[i] = -1;\r\n\t\t      else if (this.bugsX[i] < 0) this.bugsTX[i] = 1;\r\n\r\n\t\t      if (this.bugsY[i] > screenSizeY) this.bugsTY[i] = -1;\r\n\t\t      else if (this.bugsY[i] < 0) this.bugsTY[i] = 1;\r\n\r\n\t\t      let baseName = (Math.floor(frameCount / 60) % 2 == 0) ? 'smallBee' : 'smallBeeWing';\r\n\t\t      let appended = (this.bugsTX[i] == 1) ? 'Right' : 'Left';\r\n\t\t      this.beeSprite[i] = baseName + appended;\r\n\t\t    }\r\n\t\t}\r\n\r\n\t\t// server\r\n\t\t//if (this.character.isJumping) socket.emit('frame', [player.character.posX, player.character.posY]);\r\n\t}\r\n\r\n\t/* draw */\r\n\r\n\tdrawHunger() {\r\n\t\tconst camFrogPos = this.cam.toCamCoords(this.character.posX, this.character.posY);\r\n\r\n\t  const hungerBarWidth = gfx['flyBar'].width;\r\n\t\tconst hungerBarHeight = gfx['flyBar'].height;\r\n\t  const hungerRatio = 1 - (frog.hunger / frog.maxHunger);\r\n\r\n\t  fill(0);\r\n\t  stroke(0);\r\n\t  // textSize(24);\r\n\t  // textFont(pixelFont);\r\n\t  // text('Hunger', screenSizeX - 1.3 * gfx['flyBar'].width, 25);\r\n\r\n\t  if (frog.hungry) {\r\n\t    push();\r\n\t    tint(255, 255 * Math.cos(2 * frameCount / 60));\r\n\t    image(gfx['flyBubble'], camFrogPos[0] + frog.dimX, camFrogPos[1] - frog.dimY,\r\n\t          gfx['flyBubble'].width * cam.scale, gfx['flyBubble'].height * cam.scale);\r\n\t    pop();\r\n\t  }\r\n\r\n\t  if (frog.ateThisFrame) {\r\n\t    frog.showHeart.push(1);\r\n\t  }\r\n\r\n\t  for (const heart in frog.showHeart) {\r\n\t    if (frog.showHeart[heart] > 0) {\r\n\t      frog.showHeart[heart]++;\r\n\t      image(gfx['heart'], camFrogPos[0] + frog.dimX, camFrogPos[1] - frog.dimY - frog.showHeart[heart] / 2,\r\n\t            gfx['heart'].width * cam.scale, gfx['heart'].height * cam.scale);\r\n\t      frog.showHeart[heart] %= frog.heartFrames;\r\n\t    } else {\r\n\t      frog.showHeart.splice(heart, 1);\r\n\t    }\r\n\t  }\r\n\r\n\t  push();\r\n\t  translate(screenSizeX - gfx['flyBar'].width - 5, 10);\r\n\t  fill(255);\r\n\t  stroke(0);\r\n\t  rect(-5, -10, hungerBarWidth + 10, hungerBarHeight + 20, 20);\r\n\t  image(gfx['flyBarGrey'], 0, 0);\r\n\t  if (hungerRatio * hungerBarWidth >= 1) {\r\n\t\t  const flyBar = gfx['flyBar'].get(0, 0, Math.floor(hungerRatio * hungerBarWidth), hungerBarHeight);\r\n\t\t  image(flyBar, 0, 0);\r\n\t  }\r\n\t  pop();\r\n\t}\r\n\r\n\tdrawQuest(quest) {\r\n\t  const opacity = 255 * (1 - this.questDecayFrames / this.maxQuestFrames);\r\n\t  quest.gui.draw(opacity);\r\n\r\n\t  push();\r\n\t  quest.draw(gfx, opacity);\r\n\t  pop();\r\n\t}\r\n\r\n\tdraw() {\r\n\t\tpush();\r\n\t\t// main gui\r\n\t\tthis.gui.draw();\r\n\r\n\r\n\t    /* ~ additional hunger handler ~ */\r\n\t    if (this.character.tooHungry) {\r\n\t    \tlet fadeOpacity = this.fadeFrames / this.fadeTime;\r\n\t     \tbackground(0, 255 * fadeOpacity);\r\n\r\n\t\t\tpush();\r\n\t\t\ttranslate(screenSizeX / 2, 0);\r\n\t\t\tlet textCol = color(255, 255 * Math.pow(fadeOpacity, 8));\r\n\t\t\tfill(textCol);\r\n\t\t\tstroke(textCol);\r\n\t\t\ttextSize(64);\r\n\t\t\ttextAlign(CENTER);\r\n\t\t\ttextFont(pixelFont);\r\n\t\t\ttext('Oh dear! :(', 0, screenSizeY / 5);\r\n\t\t\ttext('You\\'re too hungry.', 0, screenSizeY / 3);\r\n\t\t\ttextSize(32);\r\n\t\t\ttext('Crab says it\\'s okay! Try again later?', 0, screenSizeY / 2 + gfx.crab.height * 1.25)\r\n\t\t\ttext('Click to restart the demo...', 0, screenSizeY - 32);\r\n\t\t\ttint(255, 255 * fadeOpacity);\r\n\t\t\timage(gfx.crab, -gfx.crab.width / 2, screenSizeY / 2);\r\n\t\t\tpop();\r\n\r\n\t\t    // bugs >-<\r\n\t\t    push();\r\n\t\t    if (this.fadeFrames < this.fadeTime) tint(255, 255 * fadeOpacity);\r\n\t\t    scale(.25);\r\n\t\t    for (let i = 0; i < this.bugsN; i++) {\r\n\t\t        image(gfx[this.beeSprite[i]], this.bugsX[i] / .25, this.bugsY[i] / .25);\r\n\t\t    }\r\n\t\t    pop();\r\n\t\t}\r\n\r\n\t\t// hunger gui\r\n\t\tthis.drawHunger();\r\n\r\n\t\t// quest gui\r\n\t\tif (this.currentQuest > -1) {\r\n\t\t\tthis.drawQuest(this.questList[this.currentQuest]);\r\n\t\t}\r\n\r\n\t  // frog gui\r\n\t  this.character.scale = this.cam.scale;\r\n\r\n\t\t// help lines\r\n\t\tif (this.cam.guiOptions.helpLines && lilies.frogWithinBounds() && this.character.type != 0) {\r\n\t\t  if (!this.character.isJumping || (puzzleMode && !buttonPressed)) {\r\n\t\t\tlet pointDir, extra;\r\n\t\t\tif (envType == 'CyclicLilies') { \r\n\t\t\t\tpointDir = 1;\r\n\t\t\t\textra = this.character.dimY / 2 - this.character.offY;\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tpointDir = this.character.pointingLeft ? -1 : 1;\r\n\t\t\t\textra = 0;\r\n\t\t\t}\r\n\r\n\t\t    let startPosX = this.character.posX + this.character.dimX / 2;\r\n\t\t    let jumpDest = lilies.getLilyPos(this.character.lily + pointDir * this.character.type);\r\n\t\t    let jumpDestX = jumpDest[0] + this.character.dimX / 2 + this.character.offX;\t\t    \r\n\t\t    let jumpDestY = jumpDest[1] + this.character.offY;\r\n\t\t\tlet heightLevel = (this.character.posY < jumpDestY) ? this.character.posY : jumpDestY;\r\n\r\n\t\t    this.curveParams = [startPosX, this.character.posY + this.character.dimY / 2,\r\n\t\t        (startPosX + jumpDestX) / 2, heightLevel - this.character.jumpHeight + this.character.dimY / 2 + extra, \r\n\t\t        jumpDestX, jumpDestY + this.character.dimY]\r\n\t\t  }\r\n\r\n\t\t  const camCurveParams = [];\r\n\r\n\t\t  for (let k = 0; k < 3; k++) {\r\n\t\t    let pt = [this.curveParams[2 * k], this.curveParams[2 * k + 1]];\r\n\r\n\t\t    [camCurveParams[2 * k], camCurveParams[2 * k + 1]] = this.cam.toCamCoords(...pt);\r\n\t\t  }\r\n\r\n\t\t  const allCurves = [camCurveParams];\r\n\r\n\t\t  push();\r\n\t\t  setLineDash([5, 5]);\r\n\t\t  stroke(255, 128);\r\n\t\t  strokeWeight(3);\r\n\t\t  fill(0, 0, 0, 0);\r\n\r\n\t\t  let drawDot = true;\r\n\t\t  \r\n\t\t  for (const params of allCurves) {\r\n\t\t    switch (envType) {\r\n\t\t      case 'LinearLilies':\r\n\t\t        beginShape();\r\n\t\t        curveVertex(params[0], params[1]);\r\n\t\t        curveVertex(params[0], params[1]);\r\n\t\t        curveVertex(params[2], params[3]);\r\n\t\t        curveVertex(params[4], params[5]);\r\n\t\t        curveVertex(params[4], params[5]);\r\n\t\t        endShape();\r\n\r\n\t\t        break;\r\n\t\t      case 'CyclicLilies':\r\n\t\t\t\tbeginShape();\r\n\t\t\t\tcurveVertex(params[0], params[1]);\r\n\t\t\t\tcurveVertex(params[0], params[1]);\r\n\t\t\t\tcurveVertex(params[2], params[3]);\r\n\t\t\t\tcurveVertex(params[4], params[5]);\r\n\t\t\t\tcurveVertex(params[4], params[5]);\r\n\t\t\t\tendShape();\r\n\t\t\t//   if (!this.character.isJumping) { \r\n\r\n\t\t    //     //   line(params[0], params[1], params[4], params[5]);\r\n\t\t    //     } else drawDot = false;\r\n\t\t    }\r\n\r\n\t\t    if (drawDot) {\r\n\t\t      strokeWeight(7 * this.cam.scale);\r\n\t\t      point(params[4], params[5]);\r\n\t\t    }\r\n\t\t  }\r\n\r\n\t\t  pop();\r\n\t\t}\r\n\r\n\t\t// number\r\n\t\tif (!this.character.tooHungry) {\r\n\t\t\tpush();\r\n\r\n\t\t\tif (this.character.changeNumber) {\r\n\t\t\t    this.numText = str(this.character.number);\r\n\t\t\t    this.lilyCamDiff = this.character.lilyPos;\r\n\t\t\t    this.lilyCamDiff[0] += 2 * this.numText.length + this.numOffsetX;\r\n\t\t\t    this.character.changeNumber = false;\r\n\t\t\t}\r\n\r\n\t\t\ttextFont(pixelFont);\r\n\t\t\tstroke(this.numberColor);\r\n\t\t\tfill(this.numberColor);\r\n\t\t\ttextSize(this.sizeSpecial * this.cam.scale * (1 - this.numText.length / 10));\r\n\t\t\ttext(this.numText, ...this.cam.toCamCoords(this.lilyCamDiff[0], this.lilyCamDiff[1] + this.numOffsetY * this.cam.scale));\r\n\r\n\t\t\tif (this.specialNumber) {\r\n\t\t\t\tlet specialPos = this.cam.toCamCoords(...this.character.environment.getLilyPos(this.specialLily));\r\n\t\t\t\tspecialPos[0] += this.specialOffX - 2 * this.specialLily.toString().length;\r\n\t\t\t\tspecialPos[1] += this.specialOffY * cam.scale;\r\n\r\n\t\t\t\ttext(this.specialLily.toString(), ...specialPos);\r\n\t\t\t}\r\n\r\n\t\t\tpop();\r\n\t\t}\r\n\t}\r\n}"],"names":["Player","constructor","cam","characterClass","this","characterProfile","mouseMode","pointingLeft","inventory","initQuests","gui","GUI","numberColor","color","numOffsetY","numOffsetX","specialNumber","specialLily","sizeSpecial","specialOffX","specialOffY","isFading","fadeFrames","fadeTime","hasQuest","currentQuest","instantiateCharacter","pushToIndex","character","scale","frogs","binds","Q","typeBind","W","E","R","resetCharacter","target","assignQuest","quest","questList","push","player","questDecayFrames","maxQuestFrames","frame","charCamCoords","toCamCoords","posX","posY","mouseX","environment","envDependentFrame","slice","tooHungry","controlsEnabled","guiOptions","helpLines","bugsN","bugsX","Array","fill","bugsY","bugsTX","bugsTY","beeSprite","i","Math","floor","random","screenSizeX","screenSizeY","deltaTime","quitReady","baseName","frameCount","appended","drawHunger","camFrogPos","hungerBarWidth","gfx","width","hungerBarHeight","height","hungerRatio","frog","hunger","maxHunger","stroke","hungry","tint","cos","image","dimX","dimY","pop","ateThisFrame","showHeart","heart","heartFrames","splice","translate","rect","flyBar","get","drawQuest","opacity","draw","fadeOpacity","background","textCol","pow","textSize","textAlign","CENTER","textFont","pixelFont","text","crab","lilies","frogWithinBounds","type","isJumping","puzzleMode","buttonPressed","pointDir","extra","envType","offY","startPosX","jumpDest","getLilyPos","lily","jumpDestX","offX","jumpDestY","heightLevel","curveParams","jumpHeight","camCurveParams","k","pt","allCurves","setLineDash","strokeWeight","drawDot","params","beginShape","curveVertex","endShape","point","changeNumber","numText","str","number","lilyCamDiff","lilyPos","length","specialPos","toString"],"version":3,"file":"index.8c4cbb35.js.map"}