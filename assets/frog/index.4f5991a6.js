class Quest{constructor(s,e,t,i,h,a){this.assignee=s,this.initializer=e,this.handler=t,this.successHandler=i,this.questMessage=h,this.message=h,this.draw=a,this.success=!1,this.successHandled=!1,this.calcGUIBounds(),this.initializer()}calcGUIBounds(){this.questBoxPos=[screenSizeX-gfx.flyBar.width-5,1*screenSizeY/16],this.questBoxSize=[gfx.flyBar.width,screenSizeY/4],this.questBoxMargin=6,this.gui=new GUIWindow(...this.questBoxPos,...this.questBoxSize,this.questBoxMargin,"Quest",this.message)}frame(){return this.gui.message=this.message,this.success?this.successHandler():this.handler(),this.success}}class FlyQuest extends Quest{constructor(s){super(s,(function(){this.fliesEaten=0,this.needToEat=3,this.flyEaten=!1}),(function(){!this.flyEaten&&this.assignee.character.ateThisFrame&&"fly"==this.assignee.character.foodName?(this.flyEaten=!0,this.fliesEaten++):this.flyEaten&&!this.assignee.character.ateThisFrame&&(this.flyEaten=!1),this.fliesEaten>=this.needToEat&&(this.success=!0,this.successHandler()),this.message=this.questMessage+`\n${this.fliesEaten} / ${this.needToEat}`}),(function(){this.successHandled||(this.successHandled=!0,this.message="Blessed!",generalState.wizardAnim())}),"Eat 3 flies!",(function(s,e){for(let t=0;t<this.needToEat;t++)push(),translate(this.gui.x+this.gui.w/2-1.5*s.fly.width,this.gui.y+4*this.gui.h/5),tint(255,e*(.5+.5*(t<this.fliesEaten?1:0))),image(s.fly,s.fly.width*t,0),pop()}))}}
//# sourceMappingURL=index.4f5991a6.js.map
