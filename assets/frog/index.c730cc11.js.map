{"mappings":"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","sources":["public/src/client/player.js"],"sourcesContent":["function isCyclic (obj) {\r\n  var seenObjects = [];\r\n\r\n  function detect (obj) {\r\n    if (obj && typeof obj === 'object') {\r\n      if (seenObjects.indexOf(obj) !== -1) {\r\n        return true;\r\n      }\r\n      seenObjects.push(obj);\r\n      for (var key in obj) {\r\n        if (obj.hasOwnProperty(key) && detect(obj[key])) {\r\n          console.log(obj, 'cycle at ' + key);\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  return detect(obj);\r\n}\r\n\r\nclass Player {\r\n\tconstructor(cam, characterClass) { \r\n\t    // essentials\r\n\t    this.cam = cam;\r\n\t    this.characterProfile = [];\r\n\t    this.characterClass = characterClass;\r\n\t    \r\n\t    // game properties\r\n\t    this.mouseMode = 'split'; // 'split' or 'character'\r\n\t    this.pointingLeft = false;\r\n\r\n\t    // inventory\r\n\t    this.inventory = {};\r\n\r\n\t    // initialize quests\r\n\t    this.initQuests();\r\n\r\n\t    // gui\r\n\t    this.gui = new GUI();\r\n\r\n\t    // number style\r\n\t    this.numberColor = color(255);\r\n\t    this.numOffsetY = 70;\r\n\t    this.numOffsetX = 0;\r\n\r\n\t    // show special number?\r\n\t    this.specialNumber = false;\r\n\t    this.specialLily = 0;\r\n\t    this.sizeSpecial = 40;\r\n\t    this.specialOffX = 30;\r\n\t    this.specialOffY = 70;\r\n\r\n\t    // fade screen\r\n\t    this.isFading = false;\r\n\t    this.fadeFrames = 0;\r\n\t    this.fadeTime = 3;\r\n\t}\r\n\r\n\tget hasQuest() {\r\n\t\treturn this.currentQuest > -1;\r\n\t}\r\n\r\n\tinstantiateCharacter() {\r\n\t\tthis.character = new this.characterClass(...this.characterProfile);\r\n\t\tthis.character.scale = this.cam.scale;\r\n\t\tfrogs[0] = this.character;\r\n\r\n    // number binds\r\n    this.binds = {\r\n    \t'Q': this.character.typeBind(1),\r\n    \t'W': this.character.typeBind(2),\r\n    \t'E': this.character.typeBind(3),\r\n    \t'R': this.character.typeBind(4)\r\n    }\r\n\r\n\t\treturn this.character;\r\n\t}\r\n\r\n\tresetCharacter() {\r\n\t\tthis.instantiateCharacter();\r\n\t\tthis.initQuests();\r\n\r\n\t\tthis.cam.target = this.character;\r\n\t}\r\n\r\n\tassignQuest(quest) {\r\n\t\tthis.questList.push(new quest(player));\r\n  \t\tthis.currentQuest = 0;\r\n\t}\r\n\r\n\tinitQuests() {\r\n\t    this.questList = [];\r\n\t    this.currentQuest = -1; // -1 is no quest\r\n\t    this.questDecayFrames = 0;\r\n\t    this.maxQuestFrames = 100;\r\n\t}\r\n\r\n\t/* frame */\r\n\r\n\tframe() {\r\n\t\tconst charCamCoords = this.cam.toCamCoords(this.character.posX, this.character.posY);\r\n\t\t\r\n\t\tthis.pointingLeft = (mouseX < charCamCoords[0]); // (mouseX < screenSizeX / 2) || ;\r\n\t\tthis.character.environment.envDependentFrame(this);\r\n\r\n\t\tif (this.hasQuest) {\r\n\t\t\tif (this.questList[this.currentQuest].frame()) {\r\n\t\t\t\t// if success, fade out quest window\r\n\t\t\t\tthis.questDecayFrames++;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.questDecayFrames > 0) this.questDecayFrames++;\r\n\r\n\t\t\tif (this.questDecayFrames > this.maxQuestFrames) {\r\n\t\t\t\tthis.questDecayFrames = 0;\r\n\t\t\t\tthis.questList.slice(this.currentQuest, 1);\r\n\t\t\t\tthis.currentQuest = -1;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// reset?\r\n\t\tif (this.character.tooHungry && !this.isFading) {\r\n\t\t\tcontrolsEnabled = false;\r\n\t\t\tthis.cam.guiOptions.helpLines = false;\r\n\r\n\t\t\tthis.isFading = true;\r\n\r\n\t\t    // bugs\r\n\t\t    this.bugsN = 4;\r\n\t\t    this.bugsX = Array(this.bugsN).fill(0);\r\n\t\t    this.bugsY = Array(this.bugsN).fill(0);\r\n\t\t    this.bugsTX = Array(this.bugsN).fill(1);\r\n\t\t    this.bugsTY = Array(this.bugsN).fill(-1);\r\n\t\t    this.beeSprite = Array(this.bugsN);\r\n\r\n\t\t    for (let i = 0; i < this.bugsN; i++) {\r\n\t\t      this.bugsX[i] = Math.floor(Math.random() * screenSizeX);\r\n\t\t      this.bugsY[i] = Math.floor(Math.random() * screenSizeY);\r\n\t\t      this.bugsTX[i] = (Math.random() > .5) ? 1 : -1;\r\n\t\t      this.bugsTY[i] = (Math.random() > .5) ? 1 : -1;\r\n\t\t    }\r\n\r\n\t\t} if (this.isFading && this.fadeFrames < this.fadeTime) { \r\n\t\t\tthis.fadeFrames += deltaTime / 1000;\r\n\t\t\tthis.character.posY += 10;\r\n\t\t} \r\n\t\tif (this.isFading) {\r\n\t\t    // update bugs\r\n\t\t    for (let i = 0; i < this.bugsN; i++) {\r\n\t\t      this.bugsX[i] += this.bugsTX[i];\r\n\t\t      this.bugsY[i] += this.bugsTY[i];\r\n\r\n\t\t      if (this.bugsX[i] > screenSizeX) this.bugsTX[i] = -1;\r\n\t\t      else if (this.bugsX[i] < 0) this.bugsTX[i] = 1;\r\n\r\n\t\t      if (this.bugsY[i] > screenSizeY) this.bugsTY[i] = -1;\r\n\t\t      else if (this.bugsY[i] < 0) this.bugsTY[i] = 1;\r\n\r\n\t\t      let baseName = (Math.floor(frameCount / 60) % 2 == 0) ? 'smallBee' : 'smallBeeWing';\r\n\t\t      let appended = (this.bugsTX[i] == 1) ? 'Right' : 'Left';\r\n\t\t      this.beeSprite[i] = baseName + appended;\r\n\t\t    }\r\n\t\t}\r\n\r\n\t\t// server\r\n\t\t//if (this.character.isJumping) socket.emit('frame', [player.character.posX, player.character.posY]);\r\n\t}\r\n\r\n\t/* draw */\r\n\r\n\tdrawHunger() {\r\n\t\tconst camFrogPos = this.cam.toCamCoords(this.character.posX, this.character.posY);\r\n\r\n\t  const hungerBarWidth = gfx['flyBar'].width;\r\n\t\tconst hungerBarHeight = gfx['flyBar'].height;\r\n\t  const hungerRatio = 1 - (frog.hunger / frog.maxHunger);\r\n\r\n\t  fill(0);\r\n\t  stroke(0);\r\n\t  // textSize(24);\r\n\t  // textFont(pixelFont);\r\n\t  // text('Hunger', screenSizeX - 1.3 * gfx['flyBar'].width, 25);\r\n\r\n\t  if (frog.hungry) {\r\n\t    push();\r\n\t    tint(255, 255 * Math.cos(2 * frameCount / 60));\r\n\t    image(gfx['flyBubble'], camFrogPos[0] + frog.dimX, camFrogPos[1] - frog.dimY,\r\n\t          gfx['flyBubble'].width * cam.scale, gfx['flyBubble'].height * cam.scale);\r\n\t    pop();\r\n\t  }\r\n\r\n\t  if (frog.ateThisFrame) {\r\n\t    frog.showHeart.push(1);\r\n\t  }\r\n\r\n\t  for (const heart in frog.showHeart) {\r\n\t    if (frog.showHeart[heart] > 0) {\r\n\t      frog.showHeart[heart]++;\r\n\t      image(gfx['heart'], camFrogPos[0] + frog.dimX, camFrogPos[1] - frog.dimY - frog.showHeart[heart] / 2,\r\n\t            gfx['heart'].width * cam.scale, gfx['heart'].height * cam.scale);\r\n\t      frog.showHeart[heart] %= frog.heartFrames;\r\n\t    } else {\r\n\t      frog.showHeart.splice(heart, 1);\r\n\t    }\r\n\t  }\r\n\r\n\t  push();\r\n\t  translate(screenSizeX - gfx['flyBar'].width - 5, 10);\r\n\t  fill(255);\r\n\t  stroke(0);\r\n\t  rect(-5, -10, hungerBarWidth + 10, hungerBarHeight + 20, 20);\r\n\t  image(gfx['flyBarGrey'], 0, 0);\r\n\t  if (hungerRatio * hungerBarWidth >= 1) {\r\n\t\t  const flyBar = gfx['flyBar'].get(0, 0, hungerRatio * hungerBarWidth, hungerBarHeight);\r\n\t\t  image(flyBar, 0, 0);\r\n\t  }\r\n\t  pop();\r\n\t}\r\n\r\n\tdrawQuest(quest) {\r\n\t  const opacity = 255 * (1 - this.questDecayFrames / this.maxQuestFrames);\r\n\t  quest.gui.draw(opacity);\r\n\r\n\t  push();\r\n\t  quest.draw(gfx, opacity);\r\n\t  pop();\r\n\t}\r\n\r\n\tdraw() {\r\n\t\tpush();\r\n\t\t// main gui\r\n\t\tthis.gui.draw();\r\n\r\n\r\n\t    /* ~ additional hunger handler ~ */\r\n\t    if (this.character.tooHungry) {\r\n\t    \tlet fadeOpacity = this.fadeFrames / this.fadeTime;\r\n\t     \tbackground(0, 255 * fadeOpacity);\r\n\r\n\t\t\tpush();\r\n\t\t\ttranslate(screenSizeX / 2, 0);\r\n\t\t\tlet textCol = color(255, 255 * Math.pow(fadeOpacity, 8));\r\n\t\t\tfill(textCol);\r\n\t\t\tstroke(textCol);\r\n\t\t\ttextSize(64);\r\n\t\t\ttextAlign(CENTER);\r\n\t\t\ttextFont(pixelFont);\r\n\t\t\ttext('Oh dear! :(', 0, screenSizeY / 5);\r\n\t\t\ttext('You\\'re too hungry.', 0, screenSizeY / 3);\r\n\t\t\ttextSize(32);\r\n\t\t\ttext('Crab says it\\'s okay! Try again later?', 0, screenSizeY / 2 + gfx.crab.height * 1.25)\r\n\t\t\ttint(255, 255 * fadeOpacity);\r\n\t\t\timage(gfx.crab, -gfx.crab.width / 2, screenSizeY / 2);\r\n\t\t\tpop();\r\n\r\n\t\t    // bugs >-<\r\n\t\t    push();\r\n\t\t    if (this.fadeFrames < this.fadeTime) tint(255, 255 * fadeOpacity);\r\n\t\t    scale(.25);\r\n\t\t    for (let i = 0; i < this.bugsN; i++) {\r\n\t\t        image(gfx[this.beeSprite[i]], this.bugsX[i] / .25, this.bugsY[i] / .25);\r\n\t\t    }\r\n\t\t    pop();\r\n\t\t}\r\n\r\n\t\t// hunger gui\r\n\t\tthis.drawHunger();\r\n\r\n\t\t// quest gui\r\n\t\tif (this.currentQuest > -1) {\r\n\t\t\tthis.drawQuest(this.questList[this.currentQuest]);\r\n\t\t}\r\n\r\n\t  // frog gui\r\n\t  this.character.scale = this.cam.scale;\r\n\r\n\t\t// help lines\r\n\t\tif (this.cam.guiOptions.helpLines && this.character.type != 0) {\r\n\t\t  if (!this.character.isJumping) {\r\n\t\t    let pointDir = this.character.pointingLeft ? -1 : 1;\r\n\r\n\t\t    let startPosX = this.character.posX + this.character.dimX / 2;\r\n\t\t    let jumpDest = lilies.getLilyPos(this.character.lily + pointDir * this.character.type);\r\n\t\t    let jumpDestX = jumpDest[0] + this.character.dimX / 2 + this.character.offX;\t\t    \r\n\t\t    let jumpDestY = jumpDest[1] + this.character.offY;\r\n\r\n\t\t    this.curveParams = [startPosX, this.character.posY + this.character.dimY / 2,\r\n\t\t        (startPosX + jumpDestX) / 2, ((this.character.posY < jumpDestY) ? this.character.posY : jumpDestY) - this.character.jumpHeight + this.character.dimY / 2, \r\n\t\t        jumpDestX, jumpDestY + this.character.dimY]\r\n\t\t  }\r\n\r\n\t\t  const camCurveParams = [];\r\n\r\n\t\t  for (let k = 0; k < 3; k++) {\r\n\t\t    let pt = [this.curveParams[2 * k], this.curveParams[2 * k + 1]];\r\n\r\n\t\t    [camCurveParams[2 * k], camCurveParams[2 * k + 1]] = this.cam.toCamCoords(...pt);\r\n\t\t  }\r\n\r\n\t\t  const allCurves = [camCurveParams];\r\n\r\n\t\t  push();\r\n\t\t  setLineDash([5, 5]);\r\n\t\t  stroke(255, 128);\r\n\t\t  strokeWeight(3);\r\n\t\t  fill(0, 0, 0, 0);\r\n\r\n\t\t  let drawDot = true;\r\n\t\t  \r\n\t\t  for (const params of allCurves) {\r\n\t\t    switch (envType) {\r\n\t\t      case 'LinearLilies':\r\n\t\t        beginShape();\r\n\t\t        curveVertex(params[0], params[1]);\r\n\t\t        curveVertex(params[0], params[1]);\r\n\t\t        curveVertex(params[2], params[3]);\r\n\t\t        curveVertex(params[4], params[5]);\r\n\t\t        curveVertex(params[4], params[5]);\r\n\t\t        endShape();\r\n\r\n\t\t        break;\r\n\t\t      case 'CyclicLilies':\r\n\t\t        if (!this.character.isJumping) { \r\n\t\t          line(params[0], params[1], params[4], params[5]);\r\n\t\t        } else drawDot = false;\r\n\t\t    }\r\n\r\n\t\t    if (drawDot) {\r\n\t\t      strokeWeight(7 * this.cam.scale);\r\n\t\t      point(params[4], params[5]);\r\n\t\t    }\r\n\t\t  }\r\n\r\n\t\t  pop();\r\n\t\t}\r\n\r\n\t\t// number\r\n\t\tif (!this.character.tooHungry) {\r\n\t\t\tpush();\r\n\r\n\t\t\tif (this.character.changeNumber) {\r\n\t\t\t    this.numText = str(this.character.number);\r\n\t\t\t    this.lilyCamDiff = this.character.lilyPos;\r\n\t\t\t    this.lilyCamDiff[0] += 2 * this.numText.length + this.numOffsetX;\r\n\t\t\t    this.character.changeNumber = false;\r\n\t\t\t}\r\n\r\n\t\t\ttextFont(pixelFont);\r\n\t\t\tstroke(this.numberColor);\r\n\t\t\tfill(this.numberColor);\r\n\t\t\ttextSize(this.sizeSpecial * this.cam.scale * (1 - this.numText.length / 10));\r\n\t\t\ttext(this.numText, ...this.cam.toCamCoords(this.lilyCamDiff[0], this.lilyCamDiff[1] + this.numOffsetY * this.cam.scale));\r\n\r\n\t\t\tif (this.specialNumber) {\r\n\t\t\t\tlet specialPos = this.cam.toCamCoords(...this.character.environment.getLilyPos(this.specialLily));\r\n\t\t\t\tspecialPos[0] += this.specialOffX - 2 * this.specialLily.toString().length;\r\n\t\t\t\tspecialPos[1] += this.specialOffY * cam.scale;\r\n\r\n\t\t\t\ttext(this.specialLily.toString(), ...specialPos);\r\n\t\t\t}\r\n\r\n\t\t\tpop();\r\n\t\t}\r\n\t}\r\n}"],"names":["isCyclic","obj1","seenObjects","detect","obj","indexOf","key","push","hasOwnProperty","console","log","Player","constructor","cam","characterClass","this","characterProfile","mouseMode","pointingLeft","inventory","initQuests","gui","GUI","numberColor","color","numOffsetY","numOffsetX","specialNumber","specialLily","sizeSpecial","specialOffX","specialOffY","isFading","fadeFrames","fadeTime","hasQuest","currentQuest","instantiateCharacter","character","scale","frogs","binds","Q","typeBind","W","E","R","resetCharacter","target","assignQuest","quest","questList","player","questDecayFrames","maxQuestFrames","frame","charCamCoords","toCamCoords","posX","posY","mouseX","environment","envDependentFrame","slice","tooHungry","controlsEnabled","guiOptions","helpLines","bugsN","bugsX","Array","fill","bugsY","bugsTX","bugsTY","beeSprite","i","Math","floor","random","screenSizeX","screenSizeY","deltaTime","baseName","frameCount","appended","drawHunger","camFrogPos","hungerBarWidth","gfx","width","hungerBarHeight","height","hungerRatio","frog","hunger","maxHunger","stroke","hungry","tint","cos","image","dimX","dimY","pop","ateThisFrame","showHeart","heart","heartFrames","splice","translate","rect","flyBar","get","drawQuest","opacity","draw","fadeOpacity","background","textCol","pow","textSize","textAlign","CENTER","textFont","pixelFont","text","crab","type","isJumping","pointDir","startPosX","jumpDest","lilies","getLilyPos","lily","jumpDestX","offX","jumpDestY","offY","curveParams","jumpHeight","camCurveParams","k","pt","allCurves","setLineDash","strokeWeight","drawDot","params","envType","beginShape","curveVertex","endShape","line","point","changeNumber","numText","str","number","lilyCamDiff","lilyPos","length","specialPos","toString"],"version":3,"file":"index.c730cc11.js.map"}