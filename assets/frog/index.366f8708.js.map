{"mappings":"AAAA,MAAMA,OACLC,YAAYC,EAAGC,EAAGC,EAAGC,GACpBC,KAAKJ,EAAIA,EACTI,KAAKH,EAAIA,EACTG,KAAKC,MAAQH,EACbE,KAAKE,MAAQH,EAEbC,KAAKG,UAAW,EAChBH,KAAKI,QAAS,EACdJ,KAAKK,SAAU,EACfL,KAAKM,OAAS,KACdN,KAAKO,cAAgB,EAErBP,KAAKQ,SAAU,EACfR,KAAKS,SAAW,GAChBT,KAAKU,MAAQ,EACbV,KAAKW,SAAW,EAChBX,KAAKY,SAAW,GAEhBZ,KAAKa,aAAe,CAACC,YAAc,GAAIA,YAAeA,YAAc,IACpEd,KAAKe,aAAe,CAACC,YAAc,GAAIA,YAAeA,YAAc,IAEpEhB,KAAKiB,WAAa,CACjBC,WAAa,GAIXpB,QACH,OAAOE,KAAKC,MAAQD,KAAKU,MAGtBX,QACH,OAAOC,KAAKE,MAAQF,KAAKU,MAG1BS,KAAKC,GACCpB,KAAKG,WACTH,KAAKU,OAA4B,GAAnBW,KAAKC,KAAKF,GACxBpB,KAAKU,MAAQa,MAAMvB,KAAKU,MAAOV,KAAKY,SAAUZ,KAAKW,WAIrDa,WAAWlB,GACLN,KAAKG,WACTH,KAAKI,QAAUJ,KAAKI,OACpBJ,KAAKM,OAASA,EACdN,KAAKyB,SAIPA,QACCzB,KAAKJ,EAAII,KAAKM,OAAOoB,KAAO1B,KAAKO,cAGlCoB,UAAU/B,EAAGC,GACZ,OAAO8B,UAAU3B,KAAKJ,EAAII,KAAKF,EAAI,EAAGE,KAAKH,EAAIG,KAAKD,EAAI,EAAGC,KAAKF,EAAGE,KAAKD,EAAGH,EAAGC,GAG/E+B,SAAShC,EAAGC,EAAGC,EAAGC,GACjB,OAAO6B,SAAS5B,KAAKJ,EAAII,KAAKF,EAAI,EAAGE,KAAKH,EAAIG,KAAKD,EAAI,EAAGC,KAAKF,EAAGE,KAAKD,EAAGH,EAAGC,EAAGC,EAAGC,GAGpF8B,YAAYjC,EAAGC,EAAGiC,GAAK,EAAMC,GAAK,GASjC,OARAD,EAAKA,EAAK9B,KAAKU,MAAQ,EACvBqB,EAAKA,EAAK/B,KAAKU,MAAQ,EAEvBd,IAAMI,KAAKJ,EAAII,KAAKC,MAAQ,GAAKL,EACjCC,IAAMG,KAAKH,EAAIG,KAAKE,MAAQ,GAAKL,EACjCD,GAAKA,EAAIkB,YAAc,GAAKgB,EAAKhB,YAAc,EAC/CjB,GAAKA,EAAImB,YAAc,GAAKe,EAAKf,YAAc,EAExC,CAACK,KAAKW,MAAMpC,GAAIyB,KAAKW,MAAMnC,IAGnCoC,cAAcrC,EAAGC,EAAGiC,GAAK,EAAMC,GAAK,GASnC,OARAD,EAAKA,EAAK9B,KAAKU,MAAQ,EACvBqB,EAAKA,EAAK/B,KAAKU,MAAQ,EAEvBd,GAAKA,EAAIkB,YAAc,GAAKgB,EAAKhB,YAAc,EAC/CjB,GAAKA,EAAImB,YAAc,GAAKe,EAAKf,YAAc,EAIxC,CAHPpB,EAAKI,KAAKJ,EAAII,KAAKC,MAAQ,EAAKL,EAChCC,EAAKG,KAAKH,EAAIG,KAAKE,MAAQ,EAAKL,GAKjCqC,QACOlC,KAAKG,WACJH,KAAKI,OAaRJ,KAAKyB,SAZDU,QAAUnC,KAAKa,aAAa,GAC/Bb,KAAKJ,GAAKI,KAAKS,SACP0B,QAAUnC,KAAKa,aAAa,KACpCb,KAAKJ,GAAKI,KAAKS,UAEXT,KAAKK,UACL+B,QAAUpC,KAAKe,aAAa,GAC9Bf,KAAKH,GAAKG,KAAKS,SACX2B,QAAUpC,KAAKe,aAAa,KACpCf,KAAKH,GAAKG,KAAKS","sources":["public/src/client/camera.js"],"sourcesContent":["class Camera {\r\n\tconstructor(x, y, w, h) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.baseW = w;\r\n\t\tthis.baseH = h;\r\n\r\n\t\tthis.anchored = false;\r\n\t\tthis.locked = false;\r\n\t\tthis.lockedY = true;\r\n\t\tthis.target = null;\r\n\t\tthis.targetOffsetX = 0;\r\n\r\n\t\tthis.panning = false;\r\n\t\tthis.panSpeed = 10;\r\n\t\tthis.scale = 1;\r\n\t\tthis.maxScale = 1;\r\n\t\tthis.minScale = .5;\r\n\r\n\t\tthis.mouseBoundsX = [screenSizeX / 50, screenSizeX - (screenSizeX / 50)];\r\n\t\tthis.mouseBoundsY = [screenSizeY / 50, screenSizeY - (screenSizeY / 50)];\r\n\r\n\t\tthis.guiOptions = {\r\n\t\t\t'helpLines': true\r\n\t\t};\r\n\t}\r\n\r\n\tget w() {\r\n\t\treturn this.baseW / this.scale;\r\n\t}\r\n\r\n\tget h() {\r\n\t\treturn this.baseH / this.scale;\r\n\t}\r\n\r\n\tzoom(delta) { \r\n\t\tif (!this.anchored) {\r\n\t\t\tthis.scale -= Math.sign(delta) * .1;\r\n\t\t\tthis.scale = clamp(this.scale, this.minScale, this.maxScale);\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleLock(target) {\r\n\t\tif (!this.anchored) {\r\n\t\t\tthis.locked = !this.locked;\r\n\t\t\tthis.target = target;\r\n\t\t\tthis.lockX();\r\n\t\t}\r\n\t}\r\n\r\n\tlockX() {\r\n\t\tthis.x = this.target.posX + this.targetOffsetX;\r\n\t}\r\n\r\n\tpointTest(x, y) {\r\n\t\treturn pointTest(this.x - this.w / 2, this.y - this.h / 2, this.w, this.h, x, y);\r\n\t}\r\n\r\n\trectTest(x, y, w, h) {\r\n\t\treturn rectTest(this.x - this.w / 2, this.y - this.h / 2, this.w, this.h, x, y, w, h);\r\n\t}\r\n\r\n\ttoCamCoords(x, y, sX = true, sY = false) {\r\n\t\tsX = sX ? this.scale : 1;\r\n\t\tsY = sY ? this.scale : 1;\r\n\r\n\t\tx = -(this.x - this.baseW / 2) + x;\r\n\t\ty = -(this.y - this.baseH / 2) + y;\r\n\t\tx = (x - screenSizeX / 2) * sX + screenSizeX / 2;\r\n\t\ty = (y - screenSizeY / 2) * sY + screenSizeY / 2;\r\n\r\n\t\treturn [Math.floor(x), Math.floor(y)];\r\n\t}\r\n\r\n\ttoWorldCoords(x, y, sX = true, sY = true) { \r\n\t\tsX = sX ? this.scale : 1;\r\n\t\tsY = sY ? this.scale : 1;\r\n\r\n\t\tx = (x - screenSizeX / 2) / sX + screenSizeX / 2;\r\n\t\ty = (y - screenSizeY / 2) / sY + screenSizeY / 2;\r\n\t\tx = (this.x - this.baseW / 2) + x;\r\n\t\ty = (this.y - this.baseH / 2) + y;\r\n\r\n\t\treturn [x, y];\r\n\t}\r\n\r\n\tframe() {\r\n\t  if (!this.anchored) {\r\n\t\t  if (!this.locked) {\r\n\t\t    if (mouseX <= this.mouseBoundsX[0]) \r\n\t\t    \tthis.x -= this.panSpeed;\r\n\t\t    else if (mouseX >= this.mouseBoundsX[1])\r\n\t\t    \tthis.x += this.panSpeed;\r\n\t\t    \r\n\t\t    if (!this.lockedY) {\r\n\t\t\t    if (mouseY <= this.mouseBoundsY[0])\r\n\t\t \t    \tthis.y -= this.panSpeed;\r\n\t\t\t\telse if (mouseY >= this.mouseBoundsY[1])\r\n\t\t\t\t\tthis.y += this.panSpeed;\r\n\t\t\t}\r\n\t\t  } else {\r\n\t\t    this.lockX();\r\n\t\t  }\r\n\t\t}\r\n\t}\r\n}"],"names":["Camera","constructor","x","y","w","h","this","baseW","baseH","anchored","locked","lockedY","target","targetOffsetX","panning","panSpeed","scale","maxScale","minScale","mouseBoundsX","screenSizeX","mouseBoundsY","screenSizeY","guiOptions","helpLines","zoom","delta","Math","sign","clamp","toggleLock","lockX","posX","pointTest","rectTest","toCamCoords","sX","sY","floor","toWorldCoords","frame","mouseX","mouseY"],"version":3,"file":"index.366f8708.js.map"}