{"mappings":"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","sources":["public/src/client/camera.js"],"sourcesContent":["class Camera {\r\n\tconstructor(x, y, w, h) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.baseW = w;\r\n\t\tthis.baseH = h;\r\n\r\n\t\tthis.anchored = false;\r\n\t\tthis.locked = false;\r\n\t\tthis.lockedY = true;\r\n\t\tthis.target = null;\r\n\t\tthis.targetOffsetX = 0;\r\n\r\n\t\tthis.panning = false;\r\n\t\tthis.panSpeed = 10;\r\n\t\tthis.scale = 1;\r\n\t\tthis.maxScale = 1;\r\n\t\tthis.minScale = .5;\r\n\r\n\t\tthis.mouseBoundsX = [screenSizeX / 50, screenSizeX - (screenSizeX / 50)];\r\n\t\tthis.mouseBoundsY = [screenSizeY / 50, screenSizeY - (screenSizeY / 50)];\r\n\r\n\t\tthis.guiOptions = {\r\n\t\t\t'helpLines': true\r\n\t\t};\r\n\t}\r\n\r\n\tget w() {\r\n\t\treturn this.baseW / this.scale;\r\n\t}\r\n\r\n\tget h() {\r\n\t\treturn this.baseH / this.scale;\r\n\t}\r\n\r\n\tzoom(delta) { \r\n\t\tif (!this.anchored) {\r\n\t\t\tthis.scale -= Math.sign(delta) * .1;\r\n\t\t\tthis.scale = clamp(this.scale, this.minScale, this.maxScale);\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleLock(target) {\r\n\t\tthis.locked = !this.locked;\r\n\t\tthis.target = target;\r\n\t\tthis.lockX();\r\n\t}\r\n\r\n\tlockX() {\r\n\t\tthis.x = this.target.posX + this.targetOffsetX;\r\n\t}\r\n\r\n\tpointTest(x, y) {\r\n\t\treturn pointTest(this.x - this.w / 2, this.y - this.h / 2, this.w, this.h, x, y);\r\n\t}\r\n\r\n\trectTest(x, y, w, h) {\r\n\t\treturn rectTest(this.x - this.w / 2, this.y - this.h / 2, this.w, this.h, x, y, w, h);\r\n\t}\r\n\r\n\ttoCamCoords(x, y, sX = true, sY = false) {\r\n\t\tsX = sX ? this.scale : 1;\r\n\t\tsY = sY ? this.scale : 1;\r\n\r\n\t\tx = -(this.x - this.baseW / 2) + x;\r\n\t\ty = -(this.y - this.baseH / 2) + y;\r\n\t\tx = (x - screenSizeX / 2) * sX + screenSizeX / 2;\r\n\t\ty = (y - screenSizeY / 2) * sY + screenSizeY / 2;\r\n\r\n\t\treturn [Math.floor(x), Math.floor(y)];\r\n\t}\r\n\r\n\ttoWorldCoords(x, y, sX = true, sY = true) { \r\n\t\tsX = sX ? this.scale : 1;\r\n\t\tsY = sY ? this.scale : 1;\r\n\r\n\t\tx = (x - screenSizeX / 2) / sX + screenSizeX / 2;\r\n\t\ty = (y - screenSizeY / 2) / sY + screenSizeY / 2;\r\n\t\tx = (this.x - this.baseW / 2) + x;\r\n\t\ty = (this.y - this.baseH / 2) + y;\r\n\r\n\t\treturn [x, y];\r\n\t}\r\n\r\n\tframe() {\r\n\t  if (!this.anchored) {\r\n\t\t  if (!this.locked) {\r\n\t\t    if (mouseX <= this.mouseBoundsX[0]) \r\n\t\t    \tthis.x -= this.panSpeed;\r\n\t\t    else if (mouseX >= this.mouseBoundsX[1])\r\n\t\t    \tthis.x += this.panSpeed;\r\n\t\t    \r\n\t\t    if (!this.lockedY) {\r\n\t\t\t    if (mouseY <= this.mouseBoundsY[0])\r\n\t\t \t    \tthis.y -= this.panSpeed;\r\n\t\t\t\telse if (mouseY >= this.mouseBoundsY[1])\r\n\t\t\t\t\tthis.y += this.panSpeed;\r\n\t\t\t}\r\n\t\t  } else {\r\n\t\t    this.lockX();\r\n\t\t  }\r\n\t\t}\r\n\t}\r\n}"],"names":[],"version":3,"file":"index.8d42f469.js.map","sourceRoot":"/__parcel_source_root/"}