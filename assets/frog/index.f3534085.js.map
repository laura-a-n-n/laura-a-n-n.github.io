{"mappings":"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","sources":["public/src/scene/multiples-puzzle.js"],"sourcesContent":["function MultiplesPuzzle() {\n\n\tthis.envFunction = linearEnvironment;\n\tgeneralState.bg = gfx['bg'];\n\n\tgeneralState.drawBackground = function() {\n\t\tbgScale = screenSizeX / gfx.bg.width;\n\t\timage(generalState.bg, 0, -bgScale * gfx.bg.height / 4, screenSizeX, bgScale * gfx.bg.height);\n\t}\n\n\tgeneralState.song = sfx.toyTown;\n\tgeneralState.songVol = .3;\n\n\tObject.assign(this, generalState);\n\n\n\tpuzolsComplete = 0;\n\n\t// this.mouseClicked = function() {\n\n\t// \tif (snailPuzzle && placingSnail) {\n\t// \t\tplacingSnail = false;\n\t// \t\tcontrolsEnabled = true;\n\t// \t}\n\t// }\n\n\t// this.keyPressed = function() {\n\t// \tif (snailPuzzle && keyCode == UP_ARROW || keyCode == DOWN_ARROW) {\n\t// \t\tcurrentFrogType++;\n\t// \t\tcurrentFrogType %= 2;\n\t// \t\tfrog.type = frogTypes[currentFrogType];\n\t// \t}\n\t// }\n\n\tthis.setupFn = function() {\n\t\tpuzzleMode = false;\n\t\tsnailPuzzle = true;\n\n\t\tplayer.specialNumber = true;\n\t\tplayer.numberColor = color(0);\n\n\t\tbuttonPressed = false;\n\t\twaitFrames = 0;\n\t\tmaxWaitFrames = 4;\n\t\tlevelFailed = false;\n\t\tlevelWon = false;\n\t\tfrog.levelWon = false;\n        won = false;\n\n        frogTypes = this.sceneArgs.frogTypes;\n\t\tfrog.type = frogTypes[currentFrogType];\n\n\t\tcontrolsEnabled = false;\n\t\tdoubleWon = false;\n\t\tdebounce = true;\n\n\t\tplayer.gui.initialize([...frogTypes, 0, 0]);//this.sceneArgs.initVals);\n\t\tplayer.gui.calculate();\n\t\tplayer.gui.obj.quickFrog.draw = true;\n\t\tbuttonMap = ['QButton', 'WButton'];\n\t\tplayer.gui.obj.quickFrog.obj.EButton.doNotDraw = true;\n\t\tplayer.gui.obj.quickFrog.obj.RButton.doNotDraw = true;\n\t\tplayer.specialOffX = player.character.environment.lilyDimX / 4;\n\t\tplayer.specialOffY = 60;\n\n\t\tcam.scale = cam.minScale;\n\t\tcam.targetOffsetX = 6 * cam.w / 13;\n\t\tif (!cam.minX) cam.clampX(cam.x - 50, Number.MAX_SAFE_INTEGER);\n\t\tcam.anchored = false;\n\t\tsnailDebounce = 0;\n\n\t\tlilies.negativeLilies = false;\n\t\tlilies.lilySpacingX = 80;\n\n\t\tif (bugs.length == 0) {\n\t\t\tsnail = new Bug(lilies, gfx['snail'], 1, .2, 'snail');\n\t\t\tsnail.edible = false;\n\t\t\tbugs = [snail];\n\t\t\tsnail.lily = player.specialLily;\n\t\t} else {\n\t\t\tplayer.specialLily = snail.lily;\n\t\t}\n\t}\n\n\tthis.particularSetup = function() {\n\t\tcurrentFrogType = 0;\n\t\tplayer.specialLily = 999;\n\t\tplacingSnail = true;\n\t\tif (cam.locked) {\n\t\t\tcam.toggleLock(frog);\n\t\t}\n\t\tthis.setupFn();\n\t}\n\n\tthis.resetLevel = function() {\n\t\tlevelFailed = false;\n\t\tbuttonPressed = false;\n\t\tif (puzolsComplete % 2 == 0) placingSnail = true;\n\t\twaitFrames = 0;\n\t\tsnailDebounce = 0;\n\n\t\tlastHunger = frog.hunger;\n\n\t\tfrog = player.instantiateCharacter();\n        frog.type = frogTypes[currentFrogType];\n\t\tif (cam.locked && cam.target != frog) {\n\t\t\tcam.toggleLock(frog);\n\t\t\tcam.toggleLock(frog);\n\t\t}\n\n\t\tfrog.hunger = lastHunger;\n\t}\n\n\tthis.particularFrame = function() {\n        frog.pointingLeft=false;\n\n\t\tif ((snailDebounce <= 1) && frogs.length == 1) placingSnail = true;\n\t\tif (placingSnail && (snailDebounce > 1)) {\n\t        // compute snail position\n\t\t\tlet snailLily = constrain(lilies.invertLilyX(cam.toWorldCoords(mouseX, lilies.lilyY)[0]), 1, Number.MAX_SAFE_INTEGER);//);lilies.numLilies);\n\t\t\tsnail.lily = snailLily;\n\t\t\tplayer.specialLily = snailLily;\n\t\t} else if (placingSnail) snailDebounce += deltaTime / 1000;\n\t\telse {\n\t\t\tlet buttonRef = player.gui.obj.quickFrog.obj[buttonMap[currentFrogType]];\n\t\t\tbuttonRef.stroke = 'rgba(100, 255, 100, 1)';\n\t\t\tbuttonRef.color = 'rgba(100, 255, 100, 1)';\n\t\t\tbuttonRef.image = gfx.buttonToggled;\n\t\t\tbuttonRef.y = screenSizeY / 28;\n\t\t\tbuttonRef.imageScale = .98;\n\t\t}\n\n\t\tif (levelFailed || levelWon) {\n\t\t\tif(waitFrames==0)//console.log(\"level decision\");\n\t\t\twaitFrames += deltaTime / 1000;\n\t\t\tif (!levelFailed) {\n\t\t\t\thasWon = true;\n\t\t\t} else hasWon = false;\n\n\t\t\tif (waitFrames > maxWaitFrames || (levelWon && (puzolsComplete % 2 == 0) && waitFrames > maxWaitFrames / 4)) {\n\t\t\t\tthis.resetLevel();\n\n\t\t\t\t//console.log(hasWon, won);\n\t\t\t\tif (hasWon) won = true;\n\t\t\t\telse {\n\t\t\t\t\thasWon = false;\n\t\t\t\t\tfrog.type = frogTypes[0];\n\t\t\t\t\tfrogs = [frog];\n\t\t\t\t\tvisibleFrogs = [0];\n\t\t\t\t}\n\n\n\t\t\t\tif (levelFailed) {\n\t\t\t\t\t//console.log(\"epic fail\")\n\t\t\t\t\tpuzolsComplete = 0;\n\t\t\t\t\tbugs = [];\n\t\t\t\t}\n\n\t\t\t\tif (levelWon || won) {\n\t\t\t\t\t//console.log(puzolsComplete);\n\t\t\t\t\tif (puzolsComplete % 2 == 1) { \n\t\t\t\t\t\tsnail.edible = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsnail.edible = false;\n\t\t\t\t\t}\n\t\t\t\t\tif (puzolsComplete == 1) {\n\t\t\t\t\t\t// ok time to move on...\n\t\t\t\t\t\t// mgr.showScene(OpenLinear, {step: 1})\n\t\t\t\t\t\tthis.sceneArgs.frogTypes = [3, 7];\n\t\t\t\t\t\tthis.setupFn();\n\t\t\t\t\t\tplayer.gui.obj.quickFrog.obj.QButton.doNotDraw = false;\n\t\t\t\t\t\tplayer.gui.obj.quickFrog.obj.WButton.doNotDraw = false;\n\t\t\t\t\t\tfrogs = [frog];\n\t\t\t\t\t\tvisibleFrogs = [0];\n\t\t\t\t\t\t// if (cam.locked) cam.toggleLock(frog);\n\t\t\t\t\t\t// cam.toggleLock(frog);\n\t\t\t\t\t\tpuzolsComplete = 2;\n\t\t\t\t\t} else if (puzolsComplete == 3) {\n\t\t\t\t\t\tthis.sceneArgs.frogTypes = [5, 11];\n\t\t\t\t\t\tthis.setupFn();\n\t\t\t\t\t\tplayer.gui.obj.quickFrog.obj.QButton.doNotDraw = false;\n\t\t\t\t\t\tplayer.gui.obj.quickFrog.obj.WButton.doNotDraw = false;\n\t\t\t\t\t\tpuzolsComplete = 4;\n\t\t\t\t\t\tfrogs = [frog];\n\t\t\t\t\t\tvisibleFrogs = [0];\n\t\t\t\t\t\t// if (cam.locked) cam.toggleLock(frog);\n\t\t\t\t\t\t// cam.toggleLock(frog);\n\t\t\t\t\t} else if (puzolsComplete == 5) {\n\n\t\t\t\t\t\tthis.particularDraw = function() { background(0); } // fix glitchy screen\n\t\t\t\t\t\t// ok time to move on...\n\t\t\t\t\t\tmgr.showScene(OpenLinear, {step: 1})\n\t\t\t\t\t}else {\n\t\t\t\t\t\t// this.sceneArgs.specialLily = 12;\n\t\t\t\t\t\t// this.sceneArgs.initVals = [5, 7, 8, 6];\n\t\t\t\t\t\t//console.log('get em next time');\n\t\t\t\t\t\tlet lastFrogTypeIndex = (currentFrogType+1)%2;\n\t\t\t\t\t\tlet lastSnailLily = snail.lily;\n\t\t\t\t\t\tfrogs[1].type = frogTypes[lastFrogTypeIndex];\n\t\t\t\t\t\t//console.log('cur, last', currentFrogType, lastFrogTypeIndex)\n\t\t\t\t\t\tthis.setupFn();\n\t\t\t\t\t\tplayer.gui.obj.quickFrog.obj[buttonMap[lastFrogTypeIndex]].doNotDraw = true;\n\t\t\t\t\t\tpuzolsComplete++;\n\t\t\t\t\t\tsnail.lily = lastSnailLily;\n\t\t\t\t\t\tdebounce = false;\n\t\t\t\t\t\tplacingSnail = false;\n\t\t\t\t\t\tcontrolsEnabled = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// if ((cam.target != frog) || (puzolsComplete % 2 == 0 && levelWon)) {\n\t\t\t\t// \tif (cam.locked) cam.toggleLock(frog); // unbind from prev frog\n\t\t\t\t// \tcam.toggleLock(frog); // lock to new frog\n\t\t\t\t// \tif (cam.locked && (puzolsComplete % 2 == 0 && levelWon)) cam.toggleLock(frog); // unbind if placing snail. it makes sense i swear\n\t\t\t\t// }\n\t\t\t}\n\t\t}\n\n\t\tif (frog.isJumping) return;\n\n\t\tif (!levelFailed && frog.lily > player.specialLily && bugs.length > 0) {\n\t\t\t//frog.number += frog.type;\n\t\t\t//console.log('failed');\n\t\t\tfrog.type = 0;\n\t\t\tcontrolsEnabled = false;\n\t\t\tlevelFailed = true;\n\t\t\tfrog.drawType = false;\n\t\t} else if (!levelWon && (frog.lily == player.specialLily))  {\n\t\t\t//console.log('ok ok');\n\t\t\tif (!won) {\n\t\t\t\t//console.log('h');\n\t\t\t\tplayer.gui.obj.quickFrog.obj[buttonMap[currentFrogType]].doNotDraw = true;\n\t\t\t\twon = true;\n\t\t\t\tfrog.type = 0;\n\t\t\t\tfrog.drawType = false;\n\t\t\t\tfrogs.push(frog);\n\t\t\t\tfrog.showHeart.push(1);\n\t\t\t\tvisibleFrogs.push(1);\n\t\t\t\tcurrentFrogType++;\n\t\t\t\tcurrentFrogType %= 2;\n\t\t\t\t//console.log('cur cur', currentFrogType);\n\t\t\t\tlevelWon = true;\n\t\t\t\tplacingSnail = false;\n\t\t\t\tplayer.specialNumber = false;\n\t\t\t}\n\t\t} else if (puzolsComplete % 2 == 0 && (frog.lily == player.specialLily) && !debounce) {\n\t\t\t//console.log('!debounce && won');\n\t\t\tdebounce = true;\n\t\t\tplayer.specialNumber = false;\n\t\t\tsnail.edible = true;\n\t\t\t// epic! wonned!\n\t\t\tfrog.type = 0; // don't move!\n\t\t\tfrog.levelWon = true;\n\t\t\tplayer.specialNumber = false;\n\t\t\tfrog.showHeart.push(1);\n\t\t\tlevelWon = true;\n\t\t\tpuzolsComplete++;\n\t\t\tfrog.drawType = false;\n\t\t}\n\t}\n\n\tthis.particularDraw = function() {\n\t\timage(gfx['snail'], 5, 0, gfx['snail'].width * .1, gfx['snail'].height * .1);\n\t\ttext(puzolsComplete.toString(), 15 + gfx['snail'].width * .1, gfx['snail'].height * .1 / 2 + 10)\n\t}\n}"],"names":["MultiplesPuzzle","this","envFunction","linearEnvironment","generalState","bg","gfx","drawBackground","bgScale","screenSizeX","width","image","height","song","sfx","toyTown","songVol","Object","assign","puzolsComplete","setupFn","puzzleMode","snailPuzzle","player","specialNumber","numberColor","color","buttonPressed","waitFrames","maxWaitFrames","levelFailed","levelWon","frog","won","frogTypes","sceneArgs","type","currentFrogType","controlsEnabled","doubleWon","debounce","gui","initialize","calculate","obj","quickFrog","draw","buttonMap","EButton","doNotDraw","RButton","specialOffX","character","environment","lilyDimX","specialOffY","cam","scale","minScale","targetOffsetX","w","minX","clampX","x","Number","MAX_SAFE_INTEGER","anchored","snailDebounce","lilies","negativeLilies","lilySpacingX","bugs","length","snail","Bug","edible","lily","specialLily","particularSetup","placingSnail","locked","toggleLock","resetLevel","lastHunger","hunger","instantiateCharacter","target","particularFrame","pointingLeft","frogs","snailLily","constrain","invertLilyX","toWorldCoords","mouseX","lilyY","deltaTime","buttonRef","stroke","buttonToggled","y","screenSizeY","imageScale","hasWon","visibleFrogs","QButton","WButton","particularDraw","background","mgr","showScene","OpenLinear","step","lastFrogTypeIndex","lastSnailLily","isJumping","drawType","showHeart","push","text","toString"],"version":3,"file":"index.f3534085.js.map"}