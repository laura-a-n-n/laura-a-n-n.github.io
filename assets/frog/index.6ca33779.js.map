{"mappings":"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","sources":["public/src/scene/menu.js"],"sourcesContent":["function Menu() {\r\n  /* setup (っ◔◡◔)っ ❤ */\r\n  this.setup = function() {\r\n    // canvas\r\n    calcWindowBounds();\r\n\r\n    // scene manager\r\n    mgr = this.sceneManager;\r\n\r\n    // get injected properties\r\n    gfx = mgr.gfx;\r\n    pixelFont = mgr.pixelFont;\r\n\r\n    // temp player\r\n    controlsEnabled = false;\r\n    puzzleMode = false;\r\n    snailPuzzle = false;\r\n    muted = false;\r\n    levelFailed = false;\r\n    levelWon = false;\r\n    buttonPressed = false;\r\n    tempPlayer = new Player();\r\n\r\n    // background size\r\n    bgRatio = screenSizeX / gfx['bgMenu'].width;\r\n    bgScale = 2;\r\n\r\n    // background pan\r\n    trajX = 1;\r\n    trajY = 1;\r\n\r\n    \r\n    if (isMobile) { \r\n      bgRatio *= 4;\r\n      bgScale /= 4;\r\n      trajX /= 4;\r\n      trajY /= 4;\r\n    }\r\n\r\n    locX = gfx['bgMenu'].width / 3;\r\n    locY = gfx['bgMenu'].height / 3;\r\n\r\n    // global fade\r\n    globalOpacity = 0;\r\n    nothingDt = 4;\r\n    countTime = 0;\r\n    exiting = false;\r\n    displayFrogress = false;\r\n    startTime = millis();\r\n\r\n    // bugs\r\n    bugsN = 5;\r\n    bugsX = Array(bugsN).fill(0);\r\n    bugsY = Array(bugsN).fill(0);\r\n    bugsTX = Array(bugsN).fill(1);\r\n    bugsTY = Array(bugsN).fill(-1);\r\n    beeSprite = Array(bugsN);\r\n\r\n    for (let i = 0; i < bugsN; i++) {\r\n      bugsX[i] = Math.floor(Math.random() * screenSizeX);\r\n      bugsY[i] = Math.floor(Math.random() * screenSizeY);\r\n      bugsTX[i] = (Math.random() > .5) ? 1 : -1;\r\n      bugsTY[i] = (Math.random() > .5) ? 1 : -1;\r\n    }\r\n\r\n    // create game!\r\n    let canvas = createCanvas(screenSizeX, screenSizeY);\r\n    canvas.parent('game-container');\r\n\r\n    imX = screenSizeX;\r\n    imY = bgRatio * gfx.bgMenu.height;\r\n\r\n    // music\r\n    mgr.prop.song.setVolume(mgr.prop.musicVol);\r\n    mgr.prop.song.loop();\r\n  }\r\n\r\n  /* events (/◕ヮ◕)/ */\r\n\r\n  this.windowResized = function() {\r\n    calcWindowBounds();\r\n    imX = screenSizeX;\r\n    imY = bgRatio * gfx.bgMenu.height;\r\n\r\n    resizeCanvas(screenSizeX, screenSizeY);\r\n  }\r\n\r\n  this.goToFade = function() { \r\n    if (typeof startTime !== 'undefined') {\r\n      if (millis() - startTime > 1000 && (!cl_lastClicked)) { \r\n        exiting = true; \r\n      }\r\n    }\r\n  }\r\n  this.goToGame = function() { this.sceneManager.showScene(OpenLinear, {step: 0}); }\r\n  this.mouseClicked = this.goToFade;\r\n  this.keyPressed = this.goToFade;\r\n\r\n  /* main loop ✨(っ◔︣◡◔᷅)っc(◕︣◡◕᷅c)✨ */\r\n\r\n  this.frame = function() {\r\n    // update background pan\r\n    locX += trajX * Math.ceil(deltaTime / 1000);\r\n    locY += trajY * Math.ceil(deltaTime / 2000);\r\n\r\n    if (locX + bgScale * imX > gfx.bgMenu.width) trajX = -1;\r\n    else if (locX <= 0) trajX = 1;\r\n\r\n    if (locY + bgScale * imY > gfx.bgMenu.height) trajY = -1;\r\n    else if (locY <= 0) trajY = 1;\r\n\r\n    // update bugs\r\n    for (let i = 0; i < bugsN; i++) {\r\n      bugsX[i] += bugsTX[i];\r\n      bugsY[i] += bugsTY[i];\r\n\r\n      if (bugsX[i] > screenSizeX) bugsTX[i] = -1;\r\n      else if (bugsX[i] < 0) bugsTX[i] = 1;\r\n\r\n      if (bugsY[i] > screenSizeY) bugsTY[i] = -1;\r\n      else if (bugsY[i] < 0) bugsTY[i] = 1;\r\n\r\n      beeSprite[i] = (bugsTX[i] == 1) ? 'beeRight' : 'beeLeft';\r\n    }\r\n\r\n    if (exiting) {\r\n      globalOpacity += deltaTime / 10;\r\n\r\n      if (globalOpacity >= 255) {\r\n        countTime += deltaTime / 1000;\r\n\r\n        displayFrogress = true;\r\n\r\n        if (countTime >= nothingDt) {\r\n            this.goToGame();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  this.draw = function() {\r\n    this.frame();\r\n\r\n    // background\r\n    background(0);\r\n    bg = gfx.bgMenu.get(locX, locY, bgScale * imX, bgScale * imY);\r\n    image(bg, 0, 0, imX, imY);\r\n\r\n    // bugs >-<\r\n    for (let i = 0; i < bugsN; i++) {\r\n        push();\r\n\r\n        scale(.1);\r\n        translate(bugsX[i] / .1, bugsY[i] / .1);\r\n        image(gfx[beeSprite[i]], 0, 0);\r\n\r\n        pop();\r\n    }\r\n    tempPlayer.gui.draw();\r\n\r\n    // text\r\n    stroke(255);\r\n    fill(255);\r\n    textFont(pixelFont);\r\n\r\n    push();\r\n    textSize(128);\r\n    text('Frog World', 1.8 * screenSizeX / 7, screenSizeY / 6);\r\n    pop();\r\n\r\n    push();\r\n    textSize(64);\r\n    strokeWeight(1);\r\n    c = color(255, 127 + Math.sin((frameCount / 50)) * 127);\r\n    fill(c);\r\n    stroke(c);\r\n    text('begin?', 4 * screenSizeX / 5, 3 * screenSizeY / 4);\r\n    pop();\r\n\r\n    textSize(32);\r\n    text('lead artist: kyle lynn', 5, screenSizeY - 48);\r\n    text('developer/frog artist: laura ann', 5, screenSizeY - 16);\r\n    \r\n    background(0, globalOpacity);\r\n\r\n    if (displayFrogress) {\r\n        image(gfx['snail'], screenSizeX * (-.1 + 2 * countTime / nothingDt) - gfx['snail'].width / 2,\r\n                            screenSizeY / 2 - gfx['snail'].height / 2);\r\n        text('Loading in frogress...', screenSizeX / 2 - gfx['snail'].width / 2 - 20,\r\n                                       screenSizeY / 2 + gfx['snail'].height / 2 + 20);\r\n    }\r\n  }\r\n}"],"names":["Menu","this","setup","calcWindowBounds","mgr","sceneManager","gfx","pixelFont","controlsEnabled","puzzleMode","snailPuzzle","muted","levelFailed","levelWon","buttonPressed","tempPlayer","Player","bgRatio","screenSizeX","width","bgScale","trajX","trajY","isMobile","locX","locY","height","globalOpacity","nothingDt","countTime","exiting","displayFrogress","startTime","millis","bugsN","bugsX","Array","fill","bugsY","bugsTX","bugsTY","beeSprite","i","Math","floor","random","screenSizeY","createCanvas","parent","imX","imY","bgMenu","prop","song","setVolume","musicVol","loop","windowResized","resizeCanvas","goToFade","cl_lastClicked","goToGame","showScene","OpenLinear","step","mouseClicked","keyPressed","frame","ceil","deltaTime","draw","background","bg","get","image","push","scale","translate","pop","gui","stroke","textFont","textSize","text","strokeWeight","c","color","sin","frameCount"],"version":3,"file":"index.6ca33779.js.map"}