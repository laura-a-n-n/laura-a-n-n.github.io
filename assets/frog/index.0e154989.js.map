{"mappings":"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","sources":["public/src/client/quest.js"],"sourcesContent":["class Quest {\r\n\tconstructor(assignee,\r\n\t\t\t\tinitializer,\r\n\t\t\t\thandler,\r\n\t\t\t\tsuccessHandler,\r\n\t\t\t\tquestMessage,\r\n\t\t\t\tdraw) {\r\n\t\tthis.assignee = assignee;\r\n\t\tthis.initializer = initializer;\r\n\t\tthis.handler = handler;\r\n\t\tthis.successHandler = successHandler;\r\n\t\tthis.questMessage = questMessage;\r\n\t\tthis.message = questMessage;\r\n\t\tthis.draw = draw;\r\n\t\tthis.success = false;\r\n\t\tthis.successHandled = false;\r\n\r\n\t\tthis.calcGUIBounds();\r\n\t\tthis.initializer();\r\n\t}\r\n\r\n\tcalcGUIBounds() {\r\n\t\tthis.questBoxPos = [screenSizeX - gfx['flyBar'].width - 5,  1 * screenSizeY / 16];\r\n\t\tthis.questBoxSize = [gfx['flyBar'].width, screenSizeY / 4];\r\n\t\tthis.questBoxMargin = 6;\r\n\t\tthis.gui = new GUIWindow(...this.questBoxPos, ...this.questBoxSize,\r\n\t\t\t\t\t\t\t\t this.questBoxMargin, 'Quest', this.message);\r\n\t}\r\n\r\n\tframe() {\r\n\t\tthis.gui.message = this.message;\r\n\r\n\t\tif (!this.success) this.handler();\r\n\t\telse this.successHandler();\r\n\r\n\t\treturn this.success;\r\n\t}\r\n}\r\n\r\nclass FlyQuest extends Quest {\r\n\tconstructor(assignee) {\r\n\t\tsuper(\r\n\t\t\tassignee,\r\n\r\n\t\t\tfunction() {\r\n\t\t\t\tthis.fliesEaten = 0;\r\n\t\t\t\tthis.needToEat = 3;\r\n\t\t\t\tthis.flyEaten = false;\r\n\t\t\t},\r\n\r\n\t\t\tfunction() {\r\n\t\t\t\tif (!this.flyEaten && this.assignee.character.ateThisFrame\r\n\t\t\t\t\t&& this.assignee.character.foodName == 'fly') {\r\n\t\t\t\t\tthis.flyEaten = true;\r\n\t\t\t\t\tthis.fliesEaten++;\r\n\t\t\t\t} else if (this.flyEaten && !this.assignee.character.ateThisFrame) {\r\n\t\t\t\t\tthis.flyEaten = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.fliesEaten >= this.needToEat) {\r\n\t\t\t\t\tthis.success = true;\r\n\t\t\t\t\tthis.successHandler();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.message = this.questMessage + `\\n${this.fliesEaten} / ${this.needToEat}`;\r\n\t\t\t},\r\n\r\n\t\t\tfunction() {\r\n\t\t\t\tif (!this.successHandled) {\r\n\t\t\t\t\tthis.successHandled = true;\r\n\t\t\t\t\tthis.message = 'Blessed!';\r\n\t\t\t\t\t\r\n\t\t\t\t\tgeneralState.wizardAnim();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t'Eat 3 flies!',\r\n\r\n\t\t\tfunction(gfx, opacity) {\r\n\t\t\t\tfor (let i = 0; i < this.needToEat; i++) {\r\n\t\t\t\t\tpush();\r\n\t\t\t\t\ttranslate(this.gui.x + this.gui.w / 2 - 1.5 * gfx['fly'].width, this.gui.y + 4 * this.gui.h / 5);\r\n\t\t\t\t\ttint(255, opacity * (.5 + .5 * (i < this.fliesEaten ? 1 : 0)));\r\n\t\t\t\t\timage(gfx['fly'], gfx['fly'].width * i, 0);\r\n\t\t\t\t\tpop();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n}"],"names":[],"version":3,"file":"index.0e154989.js.map","sourceRoot":"/__parcel_source_root/"}