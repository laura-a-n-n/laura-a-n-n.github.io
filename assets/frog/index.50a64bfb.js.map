{"mappings":"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","sources":["public/src/obj/frog.js"],"sourcesContent":["class Frog {\r\n\tconstructor(\r\n\t\tenvironment,\r\n\t\tsprite,\r\n\t\tstartNumber,\r\n\t\tstartLily,\r\n\t\tstartLilyX,\r\n\t\tstartLilyY,\r\n\t\tscale = 1\r\n\t) {\r\n\t\t// environment\r\n\t\tthis.environment = environment;\r\n\r\n\t\t// image\r\n\t\tthis.sprite = sprite;\r\n\t\tthis.scale = scale;\r\n\t\tthis.isBby = true;\r\n\r\n\t    // numerical properties!\r\n\t    this.type = 1;\r\n\t    this.number = startNumber;\r\n\t    this.lily = startLily;\r\n\t    this.startLily = startLily;\r\n\t    this.changeNumber = true;\r\n\r\n\t    // frog hungy\r\n\t    this.hunger = 0;\r\n\t    this.hungry = false;\r\n\t    this.jumpHungerCost = 2;\r\n\t    this.frameHungerCost = .001;\r\n\t    this.minHunger = 0;\r\n\t    this.maxHunger = 100;\r\n\t    this.hungerWarning = 1 / 5;\r\n\t    this.tooHungry = false;\r\n\t    this.ateThisFrame = false;\r\n\t    this.foodName = '';\r\n\t    this.showHeart = [];\r\n\t    this.heartFrames = 60;\r\n\r\n\t    // animation\r\n\t    this.animLilyNumber = startLily;\r\n\t    this.drawType = true;\r\n\r\n\t    // jump properties\r\n\t    this.isJumping = false;\r\n\t    this.stoppedJumping = false;\r\n\t    this.jumpNextFrame = false;\r\n\t    this.jumpFrames = 0;\r\n\t    this.baseJumpFrames = 40;\r\n\t    this.baseJumpStore = 80;\r\n\t    this.baseJumpHeight = 80;\r\n\t    this.jumpTime = 80;\r\n\t    this.levelWon = false;\r\n\r\n\t    // position \r\n\t    [startLilyX, startLilyY] = this.environment.getLilyPos(startLily);\r\n\t    this.posX = startLilyX + this.offX;\r\n\t    this.posY = startLilyY + this.offY; // spawn height\r\n\t    this.lilyPos = [this.posX, this.posY];\r\n\r\n\t    // velocity\r\n\t    this.velX =  0.;\r\n\t    this.velY = 0.;\r\n\r\n\t    // direction\r\n\t    this.pointingLeft = false;\r\n\t    this.direction = 1;\r\n\t}\r\n\r\n\t/* properties */\r\n\r\n\tget dimX() {\r\n\t\treturn this.sprite.width * this.scale;\r\n\t}\r\n\r\n\tget dimY() {\r\n\t\treturn this.sprite.height * this.scale;\r\n\t}\r\n\r\n\tget offX() {\r\n\t\treturn -this.dimX / 2 + this.environment.lilyDimX / 2;\r\n\t}\r\n\r\n\tget offY() {\r\n\t\treturn -this.dimY + this.scale * this.environment.lilyDimY / 2;\r\n\t}\r\n\r\n\tget maxJumpFrames() {\r\n\t\treturn this.baseJumpFrames + Math.floor(Math.abs(this.type) / 5);\r\n\t}\r\n\r\n\tget travelDist() {\r\n\t\treturn this.type * this.direction;\r\n\t}\r\n\r\n\tget jumpProgress() {\r\n\t\treturn this.jumpFrames / this.maxJumpFrames;\r\n\t}\r\n\r\n\tget jumpHeight() {\r\n\t\treturn this.scale * this.baseJumpHeight;\r\n\t}\r\n\r\n    get jumpY() {\r\n    \treturn 4 * this.jumpHeight * this.jumpProgress * (this.jumpProgress - 1);\r\n    }\r\n\r\n\tget canJump() {\r\n\t\tif (this.hunger + this.jumpHungerCost > this.maxHunger) {\r\n\t\t\tthis.hunger += this.jumpHungerCost;\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n    \treturn !this.isJumping && this.envCondition('jump') && (!this.levelWon || this.type == 0);\r\n    }\r\n\r\n    get canEat() {\r\n    \treturn !this.isJumping && !this.ateThisFrame;\r\n    }\r\n\r\n    /* methods */\r\n\r\n    envCondition(request) {\r\n    \treturn this.environment.envCondition(this, request);\r\n    }\r\n\r\n    typeBind(num) {\r\n    \treturn (() => this.type = num);\r\n    }\r\n\r\n\tlinearJump() {\r\n\t    this.posX = lerp(this.jumpStartX, this.jumpDestX, this.jumpProgress);\r\n\t    this.posY = lerp(this.jumpStartY, this.jumpDestY, this.jumpProgress); \r\n\t    this.posY += this.jumpY;\r\n\t}\r\n\r\n\tjump() {\r\n\t\tif (this.canJump) {\r\n\t\t\t// handle jump\r\n\t\t\tthis.isJumping = true;\r\n\t\t\tthis.jumpStartX = this.posX;\r\n\t\t\tthis.jumpStartY = this.posY;\r\n\r\n\t\t\tlet jumpDest = this.environment.getLilyPos(this.lily);\r\n\t\t\tthis.jumpDestX = jumpDest[0] + this.offX;\r\n\t\t\tthis.jumpDestY = jumpDest[1] + this.offY;\r\n\r\n\t\t\t// hunger\r\n\t\t\tthis.hunger += this.jumpHungerCost;\r\n\r\n\t\t\t// sound\r\n\t\t\tif (this.environment.constructor.name == 'LinearLilies' && this.direction == -1) mgr.sfx.hopLeft.play(); \r\n\t\t\telse mgr.sfx.hop.play();\r\n\t\t}\r\n\t}\r\n\r\n\tspecial() {\r\n\t\tthis.drawSpecial = false;\r\n\t}\r\n\r\n\tdeleteSpecial() {\r\n\t\tthis.special = function() { };\r\n\t}\r\n\r\n\t/* ~ frame ~ */\r\n\r\n\tframe(cam) {\r\n\t\tthis.special();\r\n\r\n\t\tif (this.jumpNextFrame) {\r\n\t\t\tthis.jump();\r\n\t\t\tthis.jumpNextFrame = false;\r\n\t\t}\r\n\r\n\t    // frog hop\r\n\t    if (this.isJumping) {\r\n\t\t    this.jumpFrames += this.jumpTime * deltaTime / 1000;\r\n\t\t    this.jumpFrames = Math.min(this.jumpFrames, this.maxJumpFrames);\r\n\r\n\t\t    if (this.isBby) {\r\n\t\t\t    let i = Math.floor(10 * this.jumpProgress) % 10;\r\n\t\t\t    gfx['bbySpritesheet' + i.toString()] = gfx['bbySpritesheet'].get(24 * i, 0, 24, 24);\r\n\t\t\t    this.sprite = gfx['bbySpritesheet' + i.toString()];\r\n\t\t\t}\r\n\r\n\t    \tthis.environment.envJump(this);\r\n\t    }\r\n\t    else if (controlsEnabled && keyIsDown(UP_ARROW) && frameCount % 16 == 0) this.type++;\r\n\t    else if (controlsEnabled && keyIsDown(DOWN_ARROW) && frameCount % 16 == 0) this.type--;\r\n\r\n\t    // jump frames\r\n\t    if (this.jumpFrames == this.maxJumpFrames) {\r\n\t\t\t// handle number\r\n\t\t\tthis.environment.envJumpEnd(this);\r\n\r\n\t\t\t// stop jumping\r\n\t\t\tthis.jumpFrames = 0;\r\n\t\t\tthis.stoppedJumping = true;\r\n\t\t\tthis.isJumping = false;\r\n\r\n\t        lilies.kerplunkAnim(this.lily);\r\n\t    }\r\n\r\n\t    if (!this.isJumping) {\r\n\t      this.lilyPos = [this.posX, this.posY];\r\n\t      this.changeNumber = true;\r\n\t    }\r\n\r\n\t    // food\r\n\t    this.ateThisFrame = false;\r\n\t    this.foodName = '';\r\n\r\n\t    // hunger\r\n\t    if (this.hunger < this.maxHunger) { \r\n\t    \tthis.hunger += this.frameHungerCost;\r\n\t    } else {\r\n\t    \tthis.tooHungry = true;\r\n\t    \tcontrolsEnabled = false;\r\n\t    }\r\n\r\n\t    this.hunger = clamp(this.hunger, this.minHunger, this.maxHunger);\r\n\r\n\t    if (this.hunger > (1 - this.hungerWarning) * this.maxHunger) {\r\n\t    \tthis.hungry = true;\r\n\t    } else {\r\n\t    \tthis.hungry = false;\r\n\t    }\r\n\t}\r\n\r\n\t/* ~ draw ~ */\r\n\r\n\tdraw() {\r\n\t\tconst frogPos = cam.toCamCoords(this.posX, this.posY, true, false);\r\n\r\n\t\tpush();\r\n\t\ttranslate(frogPos[0], frogPos[1]);\r\n\r\n\t\t// text\r\n\t\tif (this.drawType) {\r\n\t\t\tpush();\r\n\t\t\tstroke(player.numberColor);\r\n\t\t\tfill(player.numberColor);\r\n\t\t\ttextFont(pixelFont);\r\n\t\t\ttextSize(24);\r\n\t\t\tscale(cam.scale);\r\n\t\t\ttext(this.type, this.dimX * .5, -20);\r\n\t\t\tpop();\r\n\t\t}\r\n\r\n\t\t// follow the mouse\r\n\t\tapplyMatrix(\r\n\t\t  this.pointingLeft ? -1 : 1, 0, \r\n\t\t  0, 1, \r\n\t\t  this.pointingLeft ? this.dimX : 0, 0\r\n\t\t);\r\n\r\n\t\timage(this.sprite, 0, 0, \r\n\t\t  this.dimX,\r\n\t\t  this.dimY\r\n\t\t);\r\n\r\n\t\tif (this.drawSpecial) {\r\n\t\t\tthis.specialDraw();\r\n\t\t}\r\n\r\n\t\t/*\r\n\t\t\t\tpush();\r\n\t    pg.shader(frogShader);\r\n\t    frogShader.setUniform('tex0', gfx['bbyBody']);\r\n\t    frogShader.setUniform('hueVal', hueVal);\r\n\t    frogShader.setUniform('satVal', satVal);\r\n\t    frogShader.setUniform('valVal', valVal);\r\n\t    pg.rect(0, 0, this.sprite.width, this.sprite.height);\r\n\t    image(pg, 0, 0);\r\n\t    image(gfx['bbyFrame'], 0, 0, gfx['bby'].width, gfx['bby'].height);\r\n\t\tpop();\r\n\t\t*/\r\n\r\n\t\tpop();\r\n\t}\r\n}"],"names":["Frog","constructor","environment","sprite","startNumber","startLily","startLilyX","startLilyY","scale","this","isBby","type","number","lily","changeNumber","hunger","hungry","jumpHungerCost","frameHungerCost","minHunger","maxHunger","hungerWarning","tooHungry","ateThisFrame","foodName","showHeart","heartFrames","animLilyNumber","drawType","isJumping","stoppedJumping","jumpNextFrame","jumpFrames","baseJumpFrames","baseJumpStore","baseJumpHeight","jumpTime","levelWon","getLilyPos","posX","offX","posY","offY","lilyPos","velX","velY","pointingLeft","direction","dimX","width","dimY","height","lilyDimX","lilyDimY","maxJumpFrames","Math","floor","abs","travelDist","jumpProgress","jumpHeight","jumpY","canJump","envCondition","canEat","request","typeBind","num","linearJump","lerp","jumpStartX","jumpDestX","jumpStartY","jumpDestY","jump","jumpDest","name","mgr","sfx","hopLeft","play","hop","special","drawSpecial","deleteSpecial","frame","cam","deltaTime","min","i","gfx","toString","get","envJump","controlsEnabled","keyIsDown","UP_ARROW","frameCount","DOWN_ARROW","envJumpEnd","lilies","kerplunkAnim","clamp","draw","frogPos","toCamCoords","push","translate","stroke","player","numberColor","fill","textFont","pixelFont","textSize","text","pop","applyMatrix","image","specialDraw"],"version":3,"file":"index.50a64bfb.js.map"}