{"mappings":"AAAA,MAAMA,IACJC,YAAYC,EACAC,EACAC,EACAC,EAAW,EACXC,EAAO,OACjBC,KAAKL,YAAcA,EACnBK,KAAKD,KAAOA,EACZC,KAAKJ,OAASA,EACdI,KAAKF,SAAWA,EAGhBE,KAAKC,QAAS,EACdD,KAAKE,UAAY,GACjBF,KAAKG,WAAY,EAGjBH,KAAKH,KAAOA,EAEZ,IAAIO,EAAWJ,KAAKL,YAAYU,WAAWL,KAAKH,MAE7BG,KAAKM,KAAZ,OAARP,EAA2B,GACdC,KAAKO,KAAO,EAE7BP,KAAKQ,KAAOJ,EAAS,GAAKJ,KAAKM,KAG/BN,KAAKS,SAAW,EAChBT,KAAKU,OAAS,EACdV,KAAKW,UAAY,EACjBX,KAAKY,UAAY,GAGfC,WACF,OAAOb,KAAKL,YAAYU,WAAWL,KAAKH,MAAM,GACrCG,KAAKL,YAAYmB,SAAW,EAC5Bd,KAAKe,KAAO,EAGnBA,WACF,OAAOf,KAAKF,SAAWE,KAAKJ,OAAOoB,MAGjCT,WACF,OAAOP,KAAKF,SAAWE,KAAKJ,OAAOqB,OAGrCC,UAAUC,GACR,OAAOA,EAAItB,MAAQG,KAAKH,KAI1BuB,MAAMC,GACa,OAAbrB,KAAKD,OAAeC,KAAKQ,MAAQR,KAAKU,OAASV,KAAKW,UAAY,GAEhEX,KAAKS,SAAWT,KAAKY,UAAY,IAAGZ,KAAKW,YAAa,GAC1DX,KAAKS,WACLT,KAAKS,UAAY,GAEjB,IAAK,MAAMa,KAAYD,EACjBrB,KAAKkB,UAAUI,IAAaA,EAASC,QAAUvB,KAAKC,SACtDqB,EAASE,QAAUxB,KAAKE,UACxBoB,EAASG,cAAe,EACxBH,EAASI,SAAW1B,KAAKD,KAEzBC,KAAKG,WAAY,EACjBH,KAAKC,QAAS","sources":["public/src/obj/bug.js"],"sourcesContent":["class Bug {\r\n  constructor(environment,\r\n              sprite,\r\n              lily,\r\n              bugScale = 1,\r\n              type = 'fly') { \r\n    this.environment = environment;\r\n    this.type = type;\r\n    this.sprite = sprite;\r\n    this.bugScale = bugScale;\r\n\r\n    // bug stuff > = <\r\n    this.edible = true;\r\n    this.nutrition = 20;\r\n    this.destroyed = false;\r\n\r\n    // position\r\n    this.lily = lily;\r\n\r\n    let position = this.environment.getLilyPos(this.lily);\r\n\r\n    if (type == 'fly') this.offY = 30;\r\n    else this.offY = this.dimY / 3;\r\n\r\n    this.posY = position[1] - this.offY;\r\n\r\n    // animation\r\n    this.bugFrame = 0;\r\n    this.bugMax = 1;\r\n    this.bugToggle = 1;\r\n    this.maxFrames = 60;\r\n  }\r\n\r\n  get posX() {\r\n    return this.environment.getLilyPos(this.lily)[0] \r\n           + this.environment.lilyDimX / 2\r\n           - this.dimX / 2;\r\n  }\r\n\r\n  get dimX() {\r\n    return this.bugScale * this.sprite.width;\r\n  }\r\n\r\n  get dimY() {\r\n    return this.bugScale * this.sprite.height;\r\n  }\r\n\r\n  isTouched(obj) {\r\n    return obj.lily == this.lily;//rectTest(this.posX, this.posY, this.sprite.width, this.sprite.height,\r\n           //         obj.posX, obj.posY, obj.sprite.width, obj.sprite.height);\r\n  }\r\n\r\n  frame(predators) {\r\n    if (this.type == 'fly') this.posY += this.bugMax * this.bugToggle / 5;\r\n\r\n    if (this.bugFrame > this.maxFrames - 2) this.bugToggle *= -1;\r\n    this.bugFrame++;\r\n    this.bugFrame %= 60;\r\n\r\n    for (const predator of predators) {\r\n      if (this.isTouched(predator) && predator.canEat && this.edible) {\r\n        predator.hunger -= this.nutrition;\r\n        predator.ateThisFrame = true;\r\n        predator.foodName = this.type;\r\n\r\n        this.destroyed = true;\r\n        this.edible = false;\r\n      }\r\n    }\r\n  }\r\n}"],"names":["Bug","constructor","environment","sprite","lily","bugScale","type","this","edible","nutrition","destroyed","position","getLilyPos","offY","dimY","posY","bugFrame","bugMax","bugToggle","maxFrames","posX","lilyDimX","dimX","width","height","isTouched","obj","frame","predators","predator","canEat","hunger","ateThisFrame","foodName"],"version":3,"file":"index.55ce7083.js.map"}