{"mappings":"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","sources":["public/src/client/camera.js"],"sourcesContent":["class Camera {\r\n\tconstructor(x, y, w, h) {\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.baseW = w;\r\n\t\tthis.baseH = h;\r\n\r\n\t\tthis.anchored = false;\r\n\t\tthis.locked = false;\r\n\t\tthis.lockedY = true;\r\n\t\tthis.target = null;\r\n\t\tthis.targetOffsetX = 0;\r\n\r\n\t\tthis.panning = 1;\r\n\t\tthis.panSpeed = 10;\r\n\t\tthis.scale = 1;\r\n\t\tthis.maxScale = 1;\r\n\t\tthis.minScale = .5;\r\n\t\tthis.minX = false;\r\n\t\tthis.maxX = false;\r\n\r\n\t\tthis.mouseBoundsX = [screenSizeX / 50, screenSizeX - (screenSizeX / 50)];\r\n\t\tthis.mouseBoundsY = [screenSizeY / 50, screenSizeY - (screenSizeY / 50)];\r\n\r\n\t\tthis.guiOptions = {\r\n\t\t\t'helpLines': true\r\n\t\t};\r\n\t}\r\n\r\n\tget w() {\r\n\t\treturn this.baseW / this.scale;\r\n\t}\r\n\r\n\tget h() {\r\n\t\treturn this.baseH / this.scale;\r\n\t}\r\n\r\n\tclampX(minX, maxX) {\r\n\t\tthis.minX = minX;\r\n\t\tthis.maxX = maxX;\r\n\t}\r\n\r\n\tunclamp() {\r\n\t\tthis.minX = this.maxX = false;\r\n\t}\r\n\r\n\tzoom(delta) { \r\n\t\tif (!this.anchored) {\r\n\t\t\tthis.scale -= Math.sign(delta) * .1;\r\n\t\t\tthis.scale = clamp(this.scale, this.minScale, this.maxScale);\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleLock(target) {\r\n\t\tif (!this.anchored) {\r\n\t\t\tthis.locked = !this.locked;\r\n\t\t\tthis.target = target;\r\n\t\t\tthis.lockX();\r\n\t\t}\r\n\t}\r\n\r\n\tlockX() {\r\n\t\tthis.x = this.target.posX + this.targetOffsetX;\r\n\t}\r\n\r\n\tpointTest(x, y) {\r\n\t\treturn pointTest(this.x - this.w / 2, this.y - this.h / 2, this.w, this.h, x, y);\r\n\t}\r\n\r\n\trectTest(x, y, w, h) {\r\n\t\treturn rectTest(this.x - this.w / 2, this.y - this.h / 2, this.w, this.h, x, y, w, h);\r\n\t}\r\n\r\n\ttoCamCoords(x, y, sX = true, sY = false) {\r\n\t\tsX = sX ? this.scale : 1;\r\n\t\tsY = sY ? this.scale : 1;\r\n\r\n\t\tx = -(this.x - this.baseW / 2) + x;\r\n\t\ty = -(this.y - this.baseH / 2) + y;\r\n\t\tx = (x - screenSizeX / 2) * sX + screenSizeX / 2;\r\n\t\ty = (y - screenSizeY / 2) * sY + screenSizeY / 2;\r\n\r\n\t\treturn [Math.floor(x), Math.floor(y)];\r\n\t}\r\n\r\n\ttoWorldCoords(x, y, sX = true, sY = true) { \r\n\t\tsX = sX ? this.scale : 1;\r\n\t\tsY = sY ? this.scale : 1;\r\n\r\n\t\tx = (x - screenSizeX / 2) / sX + screenSizeX / 2;\r\n\t\ty = (y - screenSizeY / 2) / sY + screenSizeY / 2;\r\n\t\tx = (this.x - this.baseW / 2) + x;\r\n\t\ty = (this.y - this.baseH / 2) + y;\r\n\r\n\t\treturn [x, y];\r\n\t}\r\n\r\n\tframe() {\r\n\t  if (!this.anchored) {\r\n\t\t  if (!this.locked) {\r\n\t\t\tthis.panning += deltaTime / 1000;\r\n\t\t    if (mouseX <= this.mouseBoundsX[0]) \r\n\t\t    \tthis.x -= this.panSpeed * this.panning;\r\n\t\t    else if (mouseX >= this.mouseBoundsX[1])\r\n\t\t    \tthis.x += this.panSpeed * this.panning;\r\n\t\t\telse this.panning = 1;\r\n\t\t    \r\n\t\t    if (!this.lockedY) {\r\n\t\t\t    if (mouseY <= this.mouseBoundsY[0])\r\n\t\t \t    \tthis.y -= this.panSpeed;\r\n\t\t\t\telse if (mouseY >= this.mouseBoundsY[1])\r\n\t\t\t\t\tthis.y += this.panSpeed;\r\n\t\t\t}\r\n\t\t  } else {\r\n\t\t    this.lockX();\r\n\t\t  }\r\n\r\n\t\t  if (this.minX !== false) this.x = constrain(this.x, this.minX, this.maxX);\r\n\t\t}\r\n\t}\r\n}"],"names":["Camera","constructor","x","y","w","h","this","baseW","baseH","anchored","locked","lockedY","target","targetOffsetX","panning","panSpeed","scale","maxScale","minScale","minX","maxX","mouseBoundsX","screenSizeX","mouseBoundsY","screenSizeY","guiOptions","helpLines","clampX","unclamp","zoom","delta","Math","sign","clamp","toggleLock","lockX","posX","pointTest","rectTest","toCamCoords","sX","sY","floor","toWorldCoords","frame","deltaTime","mouseX","mouseY","constrain"],"version":3,"file":"index.f14321ff.js.map"}